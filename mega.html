
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Mega &#8212; Incentives in Computer Science</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="_static/mech.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'mega';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="One-Sided Matching" href="notes/day1_one_sided_markets.html" />
    <link rel="prev" title="Welcome to your Jupyter Book" href="intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Incentives in Computer Science - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Incentives in Computer Science - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welcome to your Jupyter Book
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Mega</a></li>

















<li class="toctree-l1"><a class="reference internal" href="notes/day1_one_sided_markets.html">One-Sided Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="notes/day2_two_sided_matching.html">Two-Sided Matching</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/FlyingWorkshop/CS269I" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/FlyingWorkshop/CS269I/issues/new?title=Issue%20on%20page%20%2Fmega.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/mega.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Mega</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Mega</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#one-sided-matching">One-Sided Matching</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#properties-of-serial-dictatorship">Properties of Serial Dictatorship</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#two-sided-matching">Two-Sided Matching</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deferred-acceptance">Deferred Acceptance</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deferred-acceptance-in-practice">Deferred Acceptance in Practice</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#top-trading-cycles">Top Trading Cycles</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#top-trading-cycles-and-chains">Top Trading Cycles and Chains</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ttc-c-in-practice">TTC(C) in Practice</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#equilibria-in-games">Equilibria in Games</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#equilibrium-in-2-player-zero-sum-games">Equilibrium in 2-Player Zero-sum Games</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aside-max-min-strategies">Aside: Max-Min Strategies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nash-eq-in-non-zero-sum-games">Nash Eq in (non-zero sum) Games</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#p2p-file-sharing-dilemma">P2P File-sharing Dilemma</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#repeated-games">Repeated Games</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#repeated-games-with-discounting">Repeated Games with Discounting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bittorrent-strategies">BitTorrent Strategies</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#market-equilibrium">Market Equilibrium</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-demand-market-model">Unit-Demand Market Model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#properties-of-competitive-equilibrium">Properties of Competitive Equilibrium</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#market-failures-2-1-2023">Market Failures (2/1/2023)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#externalities-and-public-goods">Externalities and Public Goods</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#transaction-costs">Transaction Costs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#market-thickness">Market Thickness</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#timing-issues">Timing Issues</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#information-asymmetries">Information Asymmetries</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#single-unit-auctions-2-6-2023">Single-Unit Auctions (2/6/2023)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#case-of-one-buyer">Case of One Buyer</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#case-of-multiple-buyers">Case of Multiple Buyers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#revenue-maximization">Revenue Maximization</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#sponsored-search-auctions-2-8-2023">Sponsored Search Auctions (2/8/2023)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vickrey-clarke-groves-mechanism">Vickrey-Clarke-Groves Mechanism</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unnatural-equilibria">Unnatural Equilibria</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gsp-vs-vcg-in-practice">GSP vs VCG in Practice</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pacing-equilibrium-in-first-price-auction-markets-guest-lecture">Pacing Equilibrium in First-Price Auction Markets (Guest Lecture)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model">Model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#properties-of-fppe">Properties of FPPE</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#prediction-markets-and-information-cascades-2-22-2023">Prediction Markets and Information Cascades (2/22/2023)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#liquidity-in-prediction-markets">Liquidity in Prediction Markets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#information-cascades">Information Cascades</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#legal-issues-of-prediction-markets">Legal Issues of Prediction Markets</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fixing-congestion-with-dollars-and-data-guest-lecture">Fixing Congestion with Dollars and Data (Guest Lecture)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#urban-congestion">Urban Congestion</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#large-scale-nudge-engines">Large-scale Nudge Engines</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#singapore-mrt">Singapore MRT</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#proof-of-work-blockchains-3-1-2023">Proof-of-Work Blockchains (3/1/2023)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simplified-bitcoin-protocol">(Simplified) Bitcoin Protocol</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#incentive-issues-with-big-miners">Incentive Issues with Big Miners</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selfish-mining">Selfish Mining</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#big-miners-in-practice">Big Miners in Practice</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#proof-of-stake-3-6-2023">Proof of Stake (3/6/2023)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cryptographic-preliminaries">Cryptographic Preliminaries</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#approaches-to-implementing-proof-of-stake">Approaches to Implementing Proof-of-Stake</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#security-markets-3-8-2023">Security Markets (3/8/2023)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#high-frequency-trading-arms-race">High Frequency Trading Arms Race</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stock-markets">Stock Markets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#market-failure-fixes">Market Failure Fixes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#blockchain-flashboys">Blockchain Flashboys</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#miners-extractable-value-mev">Miners’ Extractable Value (MEV)</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#envy-and-fairness-3-13-2023">Envy and Fairness (3/13/2023)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#formalizing-fair-allocations">Formalizing Fair Allocations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dominant-resource-fairness">Dominant Resource Fairness</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#drf-in-practice">DRF in Practice</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#course-selection-3-15-2023">Course Selection (3/15/2023)</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="mega">
<h1>Mega<a class="headerlink" href="#mega" title="Link to this heading">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="one-sided-matching">
<h1>One-Sided Matching<a class="headerlink" href="#one-sided-matching" title="Link to this heading">#</a></h1>
<p>Model:</p>
<ul class="simple">
<li><p>there are <span class="math notranslate nohighlight">\(n\)</span> students, each with some preference over residences</p></li>
<li><p>there are <span class="math notranslate nohighlight">\(m\)</span> dorms, each with some capacity</p></li>
</ul>
<p>We want to assign students to dorms. One possible solution is to
maximize the sum of utilities:</p>
<div class="tcolorbox docutils">
<ol class="arabic simple">
<li><p>Create a bipartite graph with one side being students and the other
side being residencies with with edges from students to dorm with
edge weight equal to how much student <span class="math notranslate nohighlight">\(i\)</span> likes dorm <span class="math notranslate nohighlight">\(j\)</span></p></li>
<li><p>Find the max-weight matching (i.e., <a class="reference external" href="https://en.wikipedia.org/wiki/Hungarian_algorithm">Hungarian
Algorithm</a>)</p></li>
</ol>
</div>
<p>Key question: how does the algorithm determine how much each student
likes each residency? Only the students themselves knows how much they
like each dorm, so we need to rely on students to tell the algorithm.</p>
<p>The issue: each student has an incentive to exaggerate how much they
like their favorite dorm and undercut how much they like other dorms.</p>
<p>As such, finding the matching that maximizes happiness was the right
solution concept, but failed to take incentives into account. Another
possible algorithm is serial dictatorship:</p>
<div class="tcolorbox docutils">
<ol class="arabic simple">
<li><p>Students are sorted by some fixed order (random, seniority,
alphabetically, etc.)</p></li>
<li><p>Go through the list in order and each student selects their most
preferred available dorm</p></li>
</ol>
</div>
<p>Is this any better? There can still be students who are unhappy with
their result under serial dictatorship.</p>
<div class="definition docutils">
<p><strong>Definition 1</strong> (Mechanism). A mechanism consists of three things: a
method of collecting inputs from agents, an algorithm that acts on the
inputs, and an action that is taken based on the output of the
algorithm.</p>
</div>
<div class="remark docutils">
<p><em>Remark 1</em>. All three components are important: for instance, students’
beliefs of how the algorithm works or how the action is taken would
affect how they respond to the way inputs are collected.</p>
</div>
<section id="properties-of-serial-dictatorship">
<h2>Properties of Serial Dictatorship<a class="headerlink" href="#properties-of-serial-dictatorship" title="Link to this heading">#</a></h2>
<div class="definition docutils">
<p><strong>Definition 2</strong> (Strategyproof/truthful). A mechanism is strategyproof
if it is in every agent’s best interest to act truthfully.</p>
</div>
<div class="definition docutils">
<p><strong>Definition 3</strong> (Dominant Strategy Incentive Compatible). A mechanism
is dominant strategy incentive compatible if it is a dominant strategy
for each participant to act truthfully. In particular, this means that
being truthful is a best response to any possible strategy profile of
other players.</p>
</div>
<div class="theorem docutils">
<p><strong>Theorem 1</strong> (Can’t game Serial Dictatorship). <em>The Serial Dictatorship
mechanism is dominant strategy incentive compatible: it is in every
student’s best interest to choose their favorite available dorm in their
term.</em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> Your room choice will not affect what rooms are available by
the time your turn comes. When it gets to your turn, what you choose is
what you get, so it is best to choose your favorite room among available
options. ◻</p>
</div>
<div class="definition docutils">
<p><strong>Definition 4</strong> (Pareto Improvement). An outcome <span class="math notranslate nohighlight">\(O'\)</span> is a Pareto
improvement over outcome <span class="math notranslate nohighlight">\(O\)</span> if all agents either strictly prefer <span class="math notranslate nohighlight">\(O'\)</span>
to <span class="math notranslate nohighlight">\(O\)</span> or are indifferent between the two, with at least one strict
preference.</p>
</div>
<div class="definition docutils">
<p><strong>Definition 5</strong> (Pareto Optimal). An outcome <span class="math notranslate nohighlight">\(O\)</span> is Pareto optimal if
there are no Pareto improvements from <span class="math notranslate nohighlight">\(O\)</span>.<a class="footnote-reference brackets" href="#id9" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p>
</div>
<p>In other words, an outcome is Pareto optimal if you can’t make anyone
happier without making someone sadder.</p>
<div class="theorem docutils">
<p><strong>Theorem 2</strong> (Pareto Optimality of Serial Dictatorship). <em>The outcome
under serial dictatorship (with any ordering of students) is Pareto
optimal.<a class="footnote-reference brackets" href="#id10" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> Let the serial dictatorship outcome be <span class="math notranslate nohighlight">\(O\)</span>. Towards a
contradiction, suppose <span class="math notranslate nohighlight">\(O\)</span> is not Pareto optimal, and there exists some
outcome <span class="math notranslate nohighlight">\(O'\)</span> that is a Pareto improvement over <span class="math notranslate nohighlight">\(O\)</span>. Consider the first
student that gets a different outcome under <span class="math notranslate nohighlight">\(O\)</span> and <span class="math notranslate nohighlight">\(O'\)</span>. Since all
students before this student are assigned the same room, the set of
available rooms for this student is the same under <span class="math notranslate nohighlight">\(O\)</span> and <span class="math notranslate nohighlight">\(O'\)</span>.
However, the student chooses their favorite room under <span class="math notranslate nohighlight">\(O\)</span>, so the room
they receive under <span class="math notranslate nohighlight">\(O'\)</span> must be worse. ◻</p>
</div>
<p>One issue with this: dictatorship can have a large affect on others.
Suppose there are ten students and the first eight have chosen rooms <span class="math notranslate nohighlight">\(1\)</span>
to <span class="math notranslate nohighlight">\(8\)</span>. Also, suppose student nine has room <span class="math notranslate nohighlight">\(9\)</span> as their <span class="math notranslate nohighlight">\(9\)</span>th favorite
room and room <span class="math notranslate nohighlight">\(10\)</span> as their <span class="math notranslate nohighlight">\(10\)</span>th favorite room while student ten has
room <span class="math notranslate nohighlight">\(9\)</span> as their favorite room and room <span class="math notranslate nohighlight">\(10\)</span> as their least favorite
room. If student nine chooses room <span class="math notranslate nohighlight">\(9\)</span> over room <span class="math notranslate nohighlight">\(10\)</span> they only gain a
small improvement, but student ten is now forced to pick room <span class="math notranslate nohighlight">\(10\)</span> over
room <span class="math notranslate nohighlight">\(9\)</span> which is a large jump in their preferences.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="two-sided-matching">
<h1>Two-Sided Matching<a class="headerlink" href="#two-sided-matching" title="Link to this heading">#</a></h1>
<p>After medical school, med students start their internship called a
“residency”. Each (prospective) doctor has preferences over hospitals
and each hospital has preferences over doctors. How should doctors and
hospitals be matched?</p>
<p>The biggest difference between residency matching and dorms is that we
now have two sided preferences. Another difference: dorm assignments are
all through Stanford’s centralized system, but there is nothing stopping
doctors and hospitals from matching on their own as an outside option.</p>
<div class="definition docutils">
<p><strong>Definition 6</strong> (Match). Consider a two-sided matching market with <span class="math notranslate nohighlight">\(I\)</span>
being participants on one side and <span class="math notranslate nohighlight">\(J\)</span> being participants on the other
side. Each <span class="math notranslate nohighlight">\(i \in I\)</span> has preferences over <span class="math notranslate nohighlight">\(J\)</span> and each <span class="math notranslate nohighlight">\(j \in J\)</span> has
preferences over <span class="math notranslate nohighlight">\(I\)</span>. A match <span class="math notranslate nohighlight">\(M\)</span> is a function <span class="math notranslate nohighlight">\(I \cup J \to I \cup J\)</span>
where <span class="math notranslate nohighlight">\(M(i) \in J\)</span> is <span class="math notranslate nohighlight">\(i\)</span>’s match, <span class="math notranslate nohighlight">\(M(i) = i\)</span> if <span class="math notranslate nohighlight">\(i\)</span> is unmatched; and
<span class="math notranslate nohighlight">\(M(j) \in I\)</span> is <span class="math notranslate nohighlight">\(j\)</span>’s match, <span class="math notranslate nohighlight">\(M(j) = j\)</span> if <span class="math notranslate nohighlight">\(j\)</span> is unmatched.</p>
</div>
<div class="definition docutils">
<p><strong>Definition 7</strong> (Blocking Pair). Given a match <span class="math notranslate nohighlight">\(M\)</span>, the pair (doctor
<span class="math notranslate nohighlight">\(i\)</span>, hospital <span class="math notranslate nohighlight">\(j\)</span>) forms a blocking pair if they prefer each other to
their assignment in <span class="math notranslate nohighlight">\(M\)</span>.</p>
</div>
<div class="definition docutils">
<p><strong>Definition 8</strong> (Stable Matching). A matching <span class="math notranslate nohighlight">\(M\)</span> is stable if there
are no blocking pairs. Equivalently, for every unmatched pair <span class="math notranslate nohighlight">\((i,j)\)</span> it
must be true that either</p>
<ul class="simple">
<li><p>Doctor <span class="math notranslate nohighlight">\(i\)</span> prefers Hospital <span class="math notranslate nohighlight">\(M(i)\)</span> over Hospital <span class="math notranslate nohighlight">\(j\)</span> or;</p></li>
<li><p>Hospital <span class="math notranslate nohighlight">\(j\)</span> prefers Doctor <span class="math notranslate nohighlight">\(M(j)\)</span> over Doctor <span class="math notranslate nohighlight">\(i\)</span>.</p></li>
</ul>
</div>
<section id="deferred-acceptance">
<h2>Deferred Acceptance<a class="headerlink" href="#deferred-acceptance" title="Link to this heading">#</a></h2>
<p>Main idea behind this algorithm: try to match each doctor to their
favorite choice. If there ever is a blocking pair, switch the matching.
In practice, each hospital accepts more than one doctor. For now, we
assume that each hospital only has one spot (but the algorithm and
results can be extended into the multiple spots case).</p>
<div class="tcolorbox docutils">
<p>While there is an unmatched doctor <span class="math notranslate nohighlight">\(i\)</span>:</p>
<ol class="arabic simple">
<li><p>Try to match doctor <span class="math notranslate nohighlight">\(i\)</span> with the next-favorite hospital <span class="math notranslate nohighlight">\(j\)</span> in their
list;</p></li>
<li><p>If hospital <span class="math notranslate nohighlight">\(j\)</span> does not yet have a doctor then hospital <span class="math notranslate nohighlight">\(j\)</span> and
doctor <span class="math notranslate nohighlight">\(i\)</span> (tentatively) match and both are happy with this match;</p></li>
<li><p>Else-if hospital <span class="math notranslate nohighlight">\(j\)</span> is already matched with doctor <span class="math notranslate nohighlight">\(i'\)</span> and prefers
their current match <span class="math notranslate nohighlight">\(i'\)</span> to doctor <span class="math notranslate nohighlight">\(i\)</span>, then doctor <span class="math notranslate nohighlight">\(i\)</span> remains
unmatched;</p></li>
<li><p>Else-if hospital <span class="math notranslate nohighlight">\(j\)</span> is already matched with doctor <span class="math notranslate nohighlight">\(i'\)</span> and prefers
doctor <span class="math notranslate nohighlight">\(i\)</span> to their current match <span class="math notranslate nohighlight">\(i'\)</span>, then doctor <span class="math notranslate nohighlight">\(i\)</span> and hospital
<span class="math notranslate nohighlight">\(j\)</span> match making them both happier off while doctor <span class="math notranslate nohighlight">\(i'\)</span> is now
unmatched.</p></li>
</ol>
</div>
<p>For an example, consider applying deferred acceptance to matching
students to universities. Suppose there were three universities,
Stanford (S), the University of Michigan (M), and Tsinghua (T). Also,
suppose there are three students, Alex (A), Bill (B), and Carl (C).
Suppose students have preferences $<span class="math notranslate nohighlight">\(\begin{aligned}
	A: S \succ M \succ T \\
	B: S \succ T \succ M \\
	C: M \succ T \succ S
\end{aligned}\)</span><span class="math notranslate nohighlight">\( and universities have preferences \)</span><span class="math notranslate nohighlight">\(\begin{aligned}
	S: B \succ C \succ A \\
	M: A \succ C \succ B \\
	T: A \succ B \succ C
\end{aligned}\)</span>$ In the first round, Alex and Bill both apply to
Stanford. Stanford prefers Bill (to Carl) to Alex so Bill’s application
is tentatively accepted. Alex is rejected, and removes Stanford from his
preference list. Only Carl applies to Michigan, so Carl’s application is
also tentatively accepted. In the second round, only Alex needs to apply
again, and Alex applies to Michigan. Now, Michigan compares Alex with
Carl (from round one) and likes Alex more, so Alex is now tentatively
accepted and Carl is rejected. As such, Carl strikes Michigan from his
list of acceptable universities. In the third round, Carl applies to
Tsinghua. This is the only application Tsinghua has received, so it is
tentatively accepted. In the next round, there are no rejected students
so no new applications are made. As such, the algorithm finishes. This
process can be summarized in the following table, where green denotes
tentative acceptance and red denotes rejection.</p>
<div class="center docutils">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>      1     2     3
</pre></div>
</div>
<hr class="docutils" />
<p><span class="math notranslate nohighlight">\(A\)</span>   <span class="math notranslate nohighlight">\(S\)</span>   <span class="math notranslate nohighlight">\(M\)</span>   <span class="math notranslate nohighlight">\(M\)</span>
<span class="math notranslate nohighlight">\(B\)</span>   <span class="math notranslate nohighlight">\(S\)</span>   <span class="math notranslate nohighlight">\(S\)</span>   <span class="math notranslate nohighlight">\(S\)</span>
<span class="math notranslate nohighlight">\(C\)</span>   <span class="math notranslate nohighlight">\(M\)</span>   <span class="math notranslate nohighlight">\(M\)</span>   <span class="math notranslate nohighlight">\(T\)</span></p>
</div>
<div class="theorem docutils">
<p><strong>Theorem 3</strong> (Runtime of Deferred Acceptance). <em>Deferred Acceptance
runs in <span class="math notranslate nohighlight">\(O()\)</span> time.</em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> Each iteration of the while loop takes <span class="math notranslate nohighlight">\(O(1)\)</span> time. At every
iteration, each doctor proposes to a new hospital. As no doctor and
hospital ever try to match more than one, there are <span class="math notranslate nohighlight">\(n^2\)</span> possible
(doctor, hospital) pairs so there are at most <span class="math notranslate nohighlight">\(n^2\)</span> iterations. Thus,
overall runtime is <span class="math notranslate nohighlight">\(O(n^2)\)</span>. ◻</p>
</div>
<div class="theorem docutils">
<p><strong>Theorem 4</strong> (DA is stable). <em>The deferred acceptance algorithm outputs
a complete stable matching.</em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> The Theorem follows from the following three claims:</p>
<ol class="arabic simple">
<li><p>At every iteration, the current match is stable with respect to
non-free doctors and hospitals.</p></li>
<li><p>Once a hospital is matched, it remains matched (but possibly to a
different doctor) until the end of the algorithm</p></li>
<li><p>At the end of the algorithm, every doctor and hospital is matched.</p></li>
</ol>
<p><strong>Claim one.</strong> Towards a contradiction, suppose <span class="math notranslate nohighlight">\((d,h)\)</span> is a blocking
pair. Thus, <span class="math notranslate nohighlight">\(d\)</span> is currently matched to a hospital worse than <span class="math notranslate nohighlight">\(h\)</span>. This
implies that <span class="math notranslate nohighlight">\(d\)</span> already tried to match with <span class="math notranslate nohighlight">\(h\)</span>. There are two cases:
either <span class="math notranslate nohighlight">\(h\)</span> refused <span class="math notranslate nohighlight">\(d\)</span>, or <span class="math notranslate nohighlight">\(h\)</span> initially matched with <span class="math notranslate nohighlight">\(d\)</span> but left them
later. In either case, <span class="math notranslate nohighlight">\(h\)</span> is currently matched with a doctor better
than <span class="math notranslate nohighlight">\(d\)</span> so <span class="math notranslate nohighlight">\((d,h)\)</span> cannot be a blocking pair.</p>
<p><strong>Claim two.</strong> Clear from the algorithm: only way for a matched hospital
to change is if there is a better doctor that proposes to them, in which
case they will match with the better doctor.</p>
<p><strong>Claim three.</strong> Towards a contradiction, suppose <span class="math notranslate nohighlight">\((d,h)\)</span> is free. At
the end of the algorithm <span class="math notranslate nohighlight">\(d\)</span> must have proposed to <span class="math notranslate nohighlight">\(h\)</span> already, so <span class="math notranslate nohighlight">\(h\)</span>
must either be matched with <span class="math notranslate nohighlight">\(d\)</span> or a doctor better than <span class="math notranslate nohighlight">\(d\)</span>. In either
case, <span class="math notranslate nohighlight">\((d,h)\)</span> thus cannot be free. ◻</p>
</div>
<div class="theorem docutils">
<p><strong>Theorem 5</strong> (Efficiency of Stable Matchings). <em>Every stable matching
is Pareto-optimal.</em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> Suppose <span class="math notranslate nohighlight">\(A\)</span> is stable and let <span class="math notranslate nohighlight">\(B\)</span> be any other matching.
Consider a doctor-hospital pair matched in <span class="math notranslate nohighlight">\(B\)</span> but not matched in <span class="math notranslate nohighlight">\(A\)</span>.
By stability of <span class="math notranslate nohighlight">\(A\)</span>, either the doctor or hospital (or both) prefers
their match under <span class="math notranslate nohighlight">\(A\)</span> to their match under <span class="math notranslate nohighlight">\(B\)</span>. ◻</p>
</div>
<p>There are many possible stable matchings that are possible, but which is
best?</p>
<div class="theorem docutils">
<p><strong>Theorem 6</strong> (Proposing Optimality). <em>The matching returned by
doctor-proposing Deferred Acceptance is doctor-optimal.</em></p>
</div>
<p>As a corollary of this result, we have:</p>
<div class="theorem docutils">
<p><strong>Theorem 7</strong> (Proposing Strategyproofness). <em>Doctor-proposing Deferred
Acceptance is strategyproof for doctors.</em></p>
</div>
<p>On the other hand, hospitals are not quite as happy with
doctor-proposing deferred acceptance.</p>
<div class="theorem docutils">
<p><strong>Theorem 8</strong> (Receiving Non-Optimality). <em>The matching returned by
doctor-proposing Deferred Acceptance is the worst stable matching for
hospitals.</em></p>
</div>
<div class="theorem docutils">
<p><strong>Theorem 9</strong> (Receiving Non-Strategyproofness). <em>It is not always best
for hospitals to truthfully reveal their preferences.</em></p>
</div>
<div class="remark docutils">
<p><em>Remark 2</em>. At this point in the lecture, Aviad dramatically pulled out
another bunch of bananas.</p>
</div>
</section>
<section id="deferred-acceptance-in-practice">
<h2>Deferred Acceptance in Practice<a class="headerlink" href="#deferred-acceptance-in-practice" title="Link to this heading">#</a></h2>
<p>Historically, residency matches proceeded as follows:</p>
<ul class="simple">
<li><p>In the 1950’s, National Resident Match Program used a
deferred-acceptance like algorithm. At this time, there were very
few female or openly gay doctors.</p></li>
<li><p>In the 1960’s, there were more couples that want to be near each
other. As such, doctors no longer have ranked preferences over
hospitals: individual preferences now also depends on what your
partner’s outcome is.</p></li>
<li><p>In the 1980’s, negative results were developed:</p>
<ol class="arabic simple">
<li><p>A stable matching may not even exist;</p></li>
<li><p>This matching problem is a <span class="math notranslate nohighlight">\(NP\)</span>-complete computational problem.</p></li>
</ol>
</li>
<li><p>In the 1990’s, an extension of the Deferred Acceptance algorithm
that resolved the couples issue was put into practice.</p></li>
</ul>
<p>How do hospitals rank doctors?</p>
<ul class="simple">
<li><p>Interviews: but this process is costly, as doctors still need to
strategize over which doctors to interview.</p></li>
<li><p>Standardized tests: maybe not anymore, since the main test (USMLE)
changed to pass-fail.</p></li>
<li><p>Safety choices: hospitals might list some “safety” doctors, but
using safety choices is never safer for hospitals (this is provably
true).</p></li>
</ul>
<div class="theorem docutils">
<p><strong>Theorem 10</strong> (No Improvements from Safety Choices). <em>Hospitals
misreporting preferences by moving their <span class="math notranslate nohighlight">\(i\)</span>th preferred doctor to a
higher position cannot help with matching with doctor of rank <span class="math notranslate nohighlight">\(i\)</span> or
better.</em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> Until doctor <span class="math notranslate nohighlight">\(i\)</span> tries to match with this hospital, the
manipulation has no effect. After doctor <span class="math notranslate nohighlight">\(i\)</span> tries to match with this
hospital, they can only be replaced by someone better. As such, either
this hospital would have gotten doctor <span class="math notranslate nohighlight">\(i\)</span> anyways, or this hospital is
stuck with doctor <span class="math notranslate nohighlight">\(i\)</span> opposed to someone better. ◻</p>
</div>
<p>Why do hospitals still use safety picks?</p>
<ul class="simple">
<li><p>Hospitals don’t know this theorem.</p></li>
<li><p>Reputation/ego: hospitals publish a “number needed to fill” number,
the lowest rank in a hospital’s list of a doctor matched to the
hospital.</p></li>
</ul>
<p>Another situation where two-sided matching comes up is in college
admissions: students apply and colleges decide who to accept. In the US,
application fees and the time it takes to write applications restricts
how many applications a student can submit. In other countries, there is
a single standardized test that determines admissions.</p>
<p>Even when there is no outside option, deferred acceptance is fast to run
and is used to match packets to servers.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="top-trading-cycles">
<h1>Top Trading Cycles<a class="headerlink" href="#top-trading-cycles" title="Link to this heading">#</a></h1>
<p>From before, we had two mechanisms for two different models of matching:</p>
<ul class="simple">
<li><p>Random Serial Dictatorship for one sided matching;</p></li>
<li><p>Deferred Acceptance for two sided matching.</p></li>
</ul>
<div class="remark docutils">
<p><em>Remark 3</em>. Clarification: Strategyproofness is a guarantee against a
single agent deviating from a truthful strategy. It is does not say
anything about collusion. A mechanism can be strategyproof but not
collusion-proof.</p>
</div>
<p>This lecture: what happens if people are already endowed with a good?
For instance, Stanford PhD students are allowed to renew housing every
year. However, they can re-enter the lottery at a low priority if they
choose not to renew. The issue: students might get a room worse than
their current room if they enter the lottery. This mechanism is not
strategyproof and leads to sub-optimal assignments.</p>
<div class="tcolorbox docutils">
<p>Input: <span class="math notranslate nohighlight">\(n\)</span> students and <span class="math notranslate nohighlight">\(n\)</span> rooms; each student has a current room and
preferences over all <span class="math notranslate nohighlight">\(n\)</span> rooms.<br />
<br />
While there are still unmatched students and rooms:</p>
<ol class="arabic simple">
<li><p>Create a graph with each unmatched room being a node and each
unmatched student being a node;</p></li>
<li><p>Draw a directed edge from each room to the student that owns the
room;</p></li>
<li><p>Draw a directed edge from each student to their most preferred
available room;</p></li>
<li><p>Remove any cycles that form and trade along the directed edges.</p></li>
</ol>
</div>
<p>We call this problem the <em>housing assignment problem with
<strong>incumbency</strong></em>.</p>
<div class="definition docutils">
<p><strong>Definition 9</strong> (Directed Bipartite Graph). Informally, a directed
bipartite graph is a graph with directed edges (arrows) and two disjoint
groups (the two sides in a market, e.g., students and houses)</p>
</div>
<div class="theorem docutils">
<p><strong>Theorem 11</strong> (Runtime of TTC). <em>Top trading cycles runs in <span class="math notranslate nohighlight">\(O(n^2)\)</span>
time, where <span class="math notranslate nohighlight">\(n\)</span> is the number of students/rooms.</em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> Constructing the graph takes <span class="math notranslate nohighlight">\(O(n)\)</span> time. Drawing edges also
takes <span class="math notranslate nohighlight">\(O(n)\)</span> time. To find cycles, we can start at any node and follow
the path traced by directed edges. Since every node has an
outward-facing directed edge and there are a finite number of nodes, we
will eventually visit some node twice; this gives a cycle.<a class="footnote-reference brackets" href="#id11" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> We need
to pass through at most <span class="math notranslate nohighlight">\(2n+1\)</span> nodes so finding a cycle will take <span class="math notranslate nohighlight">\(O(n)\)</span>
time. Finally, every run of the while-loop removes at least one student
so there are <span class="math notranslate nohighlight">\(O(n)\)</span> iterations. As such, total runtime is
$<span class="math notranslate nohighlight">\((O(n)+O(n)+O(n)) \cdot O(n) = O(n^2).\)</span>$ ◻</p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> To find all cycles, we run the strongly connected components
(SCC) algorithm.<a class="footnote-reference brackets" href="#id12" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a> (Lemma: Every SCC with vertex <span class="math notranslate nohighlight">\(&gt;1\)</span> is a cycle). So
each iteration runs in <span class="math notranslate nohighlight">\(O(n)\)</span> time. Each iteration removes <span class="math notranslate nohighlight">\(\geq 1\)</span>
students, so at most <span class="math notranslate nohighlight">\(O(n)\)</span> iterations total. Total running time:
<span class="math notranslate nohighlight">\(O(n^2)\)</span>. ◻</p>
</div>
<div class="remark docutils">
<p><em>Remark 4</em>. Since each of the <span class="math notranslate nohighlight">\(n\)</span> students reports a preference list of
length <span class="math notranslate nohighlight">\(n\)</span>, input size is <span class="math notranslate nohighlight">\(n^2\)</span> so runtime is linear in input size.</p>
</div>
<div class="definition docutils">
<p><strong>Definition 10</strong> (Individual Rationality (IR)). A mechanism is
individually rational if no agent is worse off after participating in
the mechanism.</p>
</div>
<div class="theorem docutils">
<p><strong>Theorem 12</strong> (IR of TTC). <em>The top trading cycles mechanism is
individually rational.</em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> A student trades their room if and only if they are getting a
better room. ◻</p>
</div>
<div class="theorem docutils">
<p><strong>Theorem 13</strong> (Strategyproofness). <em>Top trading cycles is
strategyproof.</em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> Consider any student <span class="math notranslate nohighlight">\(s\)</span> and room <span class="math notranslate nohighlight">\(r\)</span> that is better than their
assignment in TTC. By contradiction: <span class="math notranslate nohighlight">\(s\)</span> misreports, then receives <span class="math notranslate nohighlight">\(r\)</span>.
Let <span class="math notranslate nohighlight">\(i\)</span> be the round where <span class="math notranslate nohighlight">\(r\)</span> forms a cycle in TTC with honest reports.
We try to find the round <span class="math notranslate nohighlight">\(j\)</span> where <span class="math notranslate nohighlight">\(s\)</span> received <span class="math notranslate nohighlight">\(r\)</span> in TTC with
dishonest reports. We know that <span class="math notranslate nohighlight">\(j &gt; i\)</span> otherwise <span class="math notranslate nohighlight">\(s\)</span> would’ve been able
to receive <span class="math notranslate nohighlight">\(r\)</span> honestly (intuitively, ) ◻</p>
</div>
<div class="theorem docutils">
<p><strong>Theorem 14</strong> (Efficiency of TTC). <em>The TTC allocation is
Pareto-optimal.</em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> The TTC allocation is the same as ordering students by
iteration when they form a cycle (breaking ties arbitrarily) and then
running serial dictatorship in that order as every student gets their
most preferred room at the time they form a cycle.</p>
<p>We know that serial dictatorship is Pareto-optimal. ◻</p>
</div>
<section id="top-trading-cycles-and-chains">
<h2>Top Trading Cycles and Chains<a class="headerlink" href="#top-trading-cycles-and-chains" title="Link to this heading">#</a></h2>
<p>What happens when a student graduates? They give up their old room but
do not enter the market for new rooms. Similarly, there can be new
students that do not yet have a room. Solution: combine ideas from TTC
and RSD to get “You want my house, I get your turn”.</p>
<div class="tcolorbox docutils">
<ol class="arabic simple">
<li><p>Process all students in random order.</p></li>
<li><p>In student <span class="math notranslate nohighlight">\(i\)</span>’s turn, mark <span class="math notranslate nohighlight">\(i\)</span> as visited and…</p>
<ol class="arabic simple">
<li><p>If <span class="math notranslate nohighlight">\(i\)</span>’s top available room is unoccupied, assign that room to
<span class="math notranslate nohighlight">\(i\)</span> and free <span class="math notranslate nohighlight">\(i\)</span>’s old room.</p></li>
<li><p>Else-If the top available room is occupied by an <em>unvisited</em>
student <span class="math notranslate nohighlight">\(j\)</span>, move <span class="math notranslate nohighlight">\(j\)</span> before <span class="math notranslate nohighlight">\(i\)</span> in the order.</p></li>
<li><p>Else-If the top available room is occupied by a <em>visited</em>
student <span class="math notranslate nohighlight">\(j\)</span>, we have found a cycle.</p></li>
</ol>
</li>
</ol>
</div>
<p>This new mechanism still has the same nice properties: it’s
strategyproof, Pareto-optimal, individual rational, and has good
runtime.</p>
</section>
<section id="ttc-c-in-practice">
<h2>TTC(C) in Practice<a class="headerlink" href="#ttc-c-in-practice" title="Link to this heading">#</a></h2>
<p>Why is TTCC not used in practice? Running it once is strategyproof, but
running it over multiple years is not. Students may try to get a popular
room that they do not like to use it to get an even more preferred room
the year after. This increases demand for perceived “popular” rooms even
more.</p>
<p>Another application: school choice. New Orleans Recovery School District
used TTC to assign K and 9-th grade students to schools in 2011-12. In
public schools, some students have priorities (they have a sibling at
the school or are in the district) that they can own and use to trade
for in TTC. Next year, they switched to Deferred Acceptance. Explanation
given by the board meeting was that DA is simpler to explain to parents
and students. DA also has good publicity (2012 Nobel prize).</p>
<p>College admissions are different: universities have preferences over
applicants that are a better fit. As such, it doesn’t make much sense to
allow a Stanford admit to trade their admission for a Harvard
admittance.</p>
<p>Kidney transplants: over 100,000 people on the waitlist for a kidney
transplant. Most humans have two healthy kidneys and can donate one
before they die. However, there are blood type and other biological
compatibility issues so even if a patient has a willing donor, it could
be the case that the donor cannot donate to the patient.</p>
<p>Solution: kidney exchange, if patient <span class="math notranslate nohighlight">\(x\)</span>’s donor can donate to patient
<span class="math notranslate nohighlight">\(y\)</span> and patient <span class="math notranslate nohighlight">\(y\)</span>’s donor can donate dto patient <span class="math notranslate nohighlight">\(x\)</span>, then the two
patient-donor pairs can swap donors. Some other concerns in this
setting:</p>
<ul class="simple">
<li><p>Strategyproofness is less of a concern: preferences are more
determined purely based on blood type, etc. than personal
preferences.</p></li>
<li><p>People who are closer to death could have a higher priority.</p></li>
<li><p>Not a repeated game, won’t re-donate a received kidney.</p></li>
<li><p>Stability and incentivizing people to join the central mechanism is
more important.</p></li>
</ul>
<p>However, there is a logistical challenge with long cycles: an entire
cycle has to be operated on simultaneously. If not, one donor could
change their mind or get ill and a patient who’s donor has already
donated would be left without a kidney. On the other hand, long chains
are fine. Some other considerations:</p>
<ul class="simple">
<li><p>Dynamic problem: donors and patients arrive and leave over time and
in an uncertain manner.</p></li>
<li><p>Strategic hospitals: some hospitals might want to match kidneys
internally (due to publicity or financial incentives). When this
happens, the mechanism is not stable.</p></li>
<li><p>High failure probability: <span class="math notranslate nohighlight">\(93\%\)</span> of matches actually fail (more
compatibility issues are tested, donor illness, etc.).</p></li>
<li><p>Ethical concerns: should we prioritize any patients over another?</p></li>
<li><p>Multi-Organ exchange: trade a piece of liver for a kidney.</p></li>
</ul>
<div class="tcolorbox docutils">
<p>More notes in the <a class="reference external" href="https://flyingworkshop.github.io/market-design/book/house-allocation-and-kidney-exchange.html?highlight=top+trading#top-trading-cycles">ECON 136 course
reader</a>.
Practice exercises
<a class="reference external" href="https://flyingworkshop.github.io/market-design/book/practice.html">here</a>.</p>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="equilibria-in-games">
<h1>Equilibria in Games<a class="headerlink" href="#equilibria-in-games" title="Link to this heading">#</a></h1>
<p>In the mechanisms so far (except hospitals in Deferred Acceptance),
agents had dominant strategies (best responses regardless of others’
actions).Today, we analyze what agents should do when there is no
dominant strategy.</p>
<div class="example docutils">
<p><strong>Example 11</strong> (Penalty Kicks). Kicker can kick left or right. Goalie
can jump left or right. Probabilities of scoring are in the following
table:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>            Kick Left   Kick Right
</pre></div>
</div>
<hr class="docutils" />
<p>Jump Left      <span class="math notranslate nohighlight">\(0.5\)</span>       <span class="math notranslate nohighlight">\(0.8\)</span>
Jump Right     <span class="math notranslate nohighlight">\(0.9\)</span>       <span class="math notranslate nohighlight">\(0.2\)</span></p>
<p>If the kicker kicks left, the goalie wants to jump left. But then, the
kicker would want to kick right. Repeating this reasoning, there is no
pure strategy equilibrium.</p>
</div>
<div class="proof docutils">
<p><em>Solution.</em> Assume we have: kick left/right with probability <span class="math notranslate nohighlight">\(0.6,0.4\)</span>
and jump left/right with probability <span class="math notranslate nohighlight">\(0.7,0.3\)</span>. Then the expected change
to get a goal kicking left and kicking right are both <span class="math notranslate nohighlight">\(0.62\)</span>. Expected
chance to let a goal in jumping left and jumping right are both <span class="math notranslate nohighlight">\(0.62\)</span>.
As such, neither the kicker nor the goalie has an incentive to deviate
from their mixed strategies. ◻</p>
</div>
<div class="definition docutils">
<p><strong>Definition 12</strong> (Pure Strategy). A pure strategy fully specifies how a
player will play a game. Similar to a policy in RL and sequential
decision making.</p>
</div>
<div class="definition docutils">
<p><strong>Definition 13</strong> (Strategy Space/Set). A player’s strategy set is the
set of pure strategies available to a player</p>
</div>
<div class="definition docutils">
<p><strong>Definition 14</strong> (Mixed Strategy). A mixed strategy is a probability
distribution over pure strategies.</p>
</div>
<div class="definition docutils">
<p><strong>Definition 15</strong> (Nash Equilibrium). A profile of (possibly randomized)
strategies such that no player has any profitable deviation keeping the
other players’ strategies fixed. Equivalently, a pair of (possibly
randomized) strategies, such that neither player has an incentive to
deviate.</p>
</div>
<section id="equilibrium-in-2-player-zero-sum-games">
<h2>Equilibrium in 2-Player Zero-sum Games<a class="headerlink" href="#equilibrium-in-2-player-zero-sum-games" title="Link to this heading">#</a></h2>
<p>Assumptions: (1) <span class="math notranslate nohighlight">\(2\)</span> players and (2) the sum of payoffs for players one
and two is always equal to zero (zero-sum game).</p>
<p>Let <span class="math notranslate nohighlight">\(S_1\)</span> denote player one’s strategy space and let <span class="math notranslate nohighlight">\(S_2\)</span> denote player
two’s strategy space. Also, let <span class="math notranslate nohighlight">\(u(s_1,s_2)\)</span> denote player one’s payoff
(so player two’s payoff is <span class="math notranslate nohighlight">\(-u\)</span>). Then, player one solves
$<span class="math notranslate nohighlight">\(\max_{s_1 \in S_1} \min_{s_2 \in S_2} u(s_1,s_2)\)</span><span class="math notranslate nohighlight">\( while player two
solves \)</span><span class="math notranslate nohighlight">\(\min_{s_2 \in S_2} \max_{s_1 \in S_2} -u(s_1,s_2).\)</span>$</p>
<div class="theorem docutils">
<p><strong>Theorem 15</strong> (Min-Max Payoffs). <em>In a two player zero-sum game, the
max-min payoff for player one is equal to the Nash equilibrium payoff,
which is equal to the min-max payoff for player two (von Neumann,
1928).</em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> Comes from linear programming and duality (similar to the
equivalence between max-flow and min-cut from 161). Can also be derived
from the Min-Max Theorem of VNM. ◻</p>
</div>
</section>
<section id="aside-max-min-strategies">
<h2>Aside: Max-Min Strategies<a class="headerlink" href="#aside-max-min-strategies" title="Link to this heading">#</a></h2>
<p>For more, see presentation from KLB at UCB.</p>
<div class="definition docutils">
<p><strong>Definition 16</strong> (Some Game Theory Terminology). Extensive form games
have the following:</p>
<ul class="simple">
<li><p>Game Node: possible current states of the game.</p></li>
<li><p>Game Tree: graph representing which game nodes are reachable from
which other game nodes.</p></li>
<li><p>Information Set: all game nodes consistent with/indistinguishable
from my current node given my information.</p></li>
</ul>
</div>
<p>Even though linear programming is “fast”, it’s not so nice in actual
play.</p>
<div class="example docutils">
<p><strong>Example 17</strong> (Poker). Consider “Heads Up” two player poker. There are
<span class="math notranslate nohighlight">\(10^161\)</span> states which would be impossible to compute explicitly. Due to
incomplete information, it does not suffice to only compute what happens
at the current state (since my beliefs about what my opponents will do
depends on their beliefs of what hand I have, which includes off-path
possibilities).</p>
<p><strong>Insight 1: blueprint.</strong> Can use 50TB space to store a single
approximation strategy (<span class="math notranslate nohighlight">\(10^13\)</span> states). Use this approximation strategy
to play the current hand.</p>
<p><strong>Insight 2: regret minimization.</strong> Define regret to be the payoff lost
from not taking some action in hindsight. The regret minimization
algorithm plays the game repeatedly, updating strategy so
$<span class="math notranslate nohighlight">\(\frac{\text{regret}}{\text{number of games}} \to 0.\)</span>$</p>
</div>
<div class="theorem docutils">
<p><strong>Theorem 16</strong> (Convergence of Regret Minimization). <em>In two-player
zero-sum games, both players using regret minimization converges to Nash
equilibrium.</em></p>
</div>
</section>
<section id="nash-eq-in-non-zero-sum-games">
<h2>Nash Eq in (non-zero sum) Games<a class="headerlink" href="#nash-eq-in-non-zero-sum-games" title="Link to this heading">#</a></h2>
<p>Suppose the goalie tries to maximize the probability of a save minus the
probability of a goal, so they goalie’s payoffs are now</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>            Kick Left   Kick Right
</pre></div>
</div>
<hr class="docutils" />
<p>Jump Left     <span class="math notranslate nohighlight">\(-0.1\)</span>       <span class="math notranslate nohighlight">\(-0.8\)</span>
Jump Right    <span class="math notranslate nohighlight">\(-0.9\)</span>       <span class="math notranslate nohighlight">\(0.4\)</span></p>
<p>Good news:</p>
<div class="theorem docutils">
<p><strong>Theorem 17</strong> (Nash, 1951). <em>In every finite game there exists a Nash
equilibrium in possibly degenerate mixed strategies.</em></p>
</div>
<p>Bad news:</p>
<ul class="simple">
<li><p>Not equal to max-min/min-max payoffs;</p></li>
<li><p>Not unique;</p></li>
<li><p>Not approached by regret minimization;</p></li>
<li><p>Intractable to compute, even approximately;</p></li>
<li><p>Some mixed strategy equilibria don’t make sense.</p></li>
</ul>
<div class="example docutils">
<p><strong>Example 18</strong> (Grade Game). Two people do a group project. Grades are
assigned as follows:</p>
<ol class="arabic simple">
<li><p>You send <span class="math notranslate nohighlight">\(x \in \{2,\dots,99\}\)</span> and your partner sends <span class="math notranslate nohighlight">\(y\)</span> from the
same set.</p></li>
<li><p>Assign grades by:</p>
<ul class="simple">
<li><p>If <span class="math notranslate nohighlight">\(x = y\)</span> then your grade is <span class="math notranslate nohighlight">\(x\)</span>;</p></li>
<li><p>If <span class="math notranslate nohighlight">\(x &lt; y\)</span> then your grade is <span class="math notranslate nohighlight">\(\min \{x,y\}+2\)</span>;</p></li>
<li><p>If <span class="math notranslate nohighlight">\(x &gt; y\)</span> your grade is <span class="math notranslate nohighlight">\(\min \{x,y\}-2\)</span>.</p></li>
</ul>
</li>
</ol>
<p>Unique Nash equilibrium: <span class="math notranslate nohighlight">\(x = y = 2\)</span>. Game theorists call this the
“Traveler’s Dilemma Game.”</p>
</div>
<div class="example docutils">
<p><strong>Example 19</strong> (Intersection Game). Consider two cars arriving at an
intersection. Payoffs are:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>          Go         Wait
</pre></div>
</div>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Go    $(-99,-99)$   $(1,0)$
</pre></div>
</div>
<p>Wait     <span class="math notranslate nohighlight">\((0,1)\)</span>     <span class="math notranslate nohighlight">\((0,0)\)</span></p>
<ul class="simple">
<li><p>Two asymmetric equilibria: (Go, Wait) and (Wait, Go).</p></li>
<li><p>Symmetric equilibrium: Both go with one percent chance and wait with
one percent chance.</p></li>
<li><p>Correlated Equilibrium: (Go, Wait) with fifty percent chance and
(Wait, Go) with fifty percent chance.</p></li>
</ul>
</div>
<div class="definition docutils">
<p><strong>Definition 20</strong> (Correlated Equilibrium). A correlated distribution of
actions that every player would rather follow (e.g., a stop light)</p>
</div>
<p>Good news about correlated equilibria:</p>
<ul class="simple">
<li><p>Can be computed efficiently (through linear programming or regret
minimization).</p></li>
<li><p>If everyone runs regret minimization, play converges to the set of
correlated equilibria (cannot converge to a correlated equilibrium
itself without a correlating device).</p></li>
</ul>
<p>Bad news:</p>
<ul class="simple">
<li><p>Just like Nash eq, sometimes it’s not unique or doesn’t make sense.</p></li>
<li><p>Not an equilibrium without a correlating device.</p></li>
</ul>
<p>What happens if there is commitment? EG intersection game except the
opponent is a dog who will always play go. Then, you will always choose
to wait for the dog to go first.</p>
<div class="definition docutils">
<p><strong>Definition 21</strong> (Stackelberg Equilibrium). Strategy profile (Leader’s
strategy, Follower’s strategy) such that</p>
<ol class="arabic simple">
<li><p>Follower’s strategy is optimal given Leader’s strategy;</p></li>
<li><p>Payoff is optimal for leader among all pairs satisfying <span class="math notranslate nohighlight">\(\#1\)</span>.<a class="footnote-reference brackets" href="#id13" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a></p></li>
</ol>
</div>
<div class="remark docutils">
<p><em>Remark 5</em>. The Leader’s strategy may be a sub-optimal response to
follower’s strategy. However, commitment power means that the leader’s
Stackelberg Equilibrium is greater than their utility in any correlated
equilibrium. Finally, the follower’s strategy is deterministic without
loss of generality (so there exists an efficient linear programming alg
to solve this).</p>
</div>
<div class="example docutils">
<p><strong>Example 22</strong> (Security Games). Defenders commit to defense strategy
(and is a leader); attackers can plan attack after observing defenders’
strategies. Some settings:</p>
<ul class="simple">
<li><p>Airport security</p></li>
<li><p>Infrastructure</p></li>
<li><p>Cyber-security</p></li>
<li><p>Anti-Poaching</p></li>
</ul>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="p2p-file-sharing-dilemma">
<h1>P2P File-sharing Dilemma<a class="headerlink" href="#p2p-file-sharing-dilemma" title="Link to this heading">#</a></h1>
<p>Napster (1999-2001) had free file-sharing. People were happy with free
music but producers were unhappy because they could not get profits.
Around <span class="math notranslate nohighlight">\(40-60\%\)</span> of all college dorm traffic was Napster. It was shut
down for copyright infringement.</p>
<p>From 2000 onwards, Gnutella provided a similar service but used
decentralized peer-to-peer (P2P) file-sharing. Much harder to shut down.</p>
<p>P2P file-sharing rely on users uploading content for sharing. A large
fraction of users are free-riders: people who only download but don’t
upload at all. 2000: around 65% of users were free-riders, growing to
85% in the next few years. It is important to incentivizing uploads.</p>
<p>We can model this as a game. Two players, each a user of Gnutella. Each
player can either upload or free-ride. Payoffs are <span class="math notranslate nohighlight">\(-1\)</span> for uploading,
<span class="math notranslate nohighlight">\(+3\)</span> for downloading. Payoffs are as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>           Upload   Free-ride
</pre></div>
</div>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Upload     $2,2$     $-1,3$
</pre></div>
</div>
<p>Free-ride   <span class="math notranslate nohighlight">\(3,-1\)</span>     <span class="math notranslate nohighlight">\(0,0\)</span></p>
<p>The outcome that maximizes the two players’ payoff is for both to
upload.<a class="footnote-reference brackets" href="#id14" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a> However, free-riding is a dominant strategy for each player,
so the dominant strategy Nash equilibrium is for both players to
free-ride leading to the socially worst payoffs of <span class="math notranslate nohighlight">\((0,0)\)</span>.</p>
<section id="repeated-games">
<h2>Repeated Games<a class="headerlink" href="#repeated-games" title="Link to this heading">#</a></h2>
<p>What happens if we iterate the game <span class="math notranslate nohighlight">\(n\)</span> times, and both players seek to
maximize total payoff across all iterations? One modeling choice:
whether or not agents can or cannot commit to future behavior is
important.</p>
<div class="definition docutils">
<p><strong>Definition 23</strong> (SPNE). A Subgame Perfect Nash Equilibrium is a Nash
Equilibrium that is also a Nash Equilibrium at any subgame of the
original game.</p>
</div>
<p>Intuitively, this definition just means that agent cannot commit to
suboptimal future behavior. Alternatively, it is a Nash equilibrium that
is valid by backwards induction.</p>
<div class="remark docutils">
<p><em>Remark 6</em>. In this context, it means:</p>
<ul class="simple">
<li><p>On day <span class="math notranslate nohighlight">\(n\)</span>, agents will play Nash equilibrium.</p></li>
<li><p>On day <span class="math notranslate nohighlight">\(n-1\)</span>, agents will evaluate their actions today assuming
everyone plays Nash eq tomorrow and play Nash eq today.</p></li>
<li><p>So on and so forth.</p></li>
</ul>
</div>
<p>What is the subgame perfect equilibrium of the repeated game?<a class="footnote-reference brackets" href="#id15" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a></p>
<ul class="simple">
<li><p>In the <span class="math notranslate nohighlight">\(n\)</span>th iteration, free-riding is the dominant strategy so both
players free-riding will be played.</p></li>
<li><p>In the <span class="math notranslate nohighlight">\(n-1\)</span>th iteration, both players will free-ride anyways in the
future so free-riding today is still dominant.</p></li>
<li><p>By induction, free-riding is dominant in every iteration.</p></li>
</ul>
</section>
<section id="repeated-games-with-discounting">
<h2>Repeated Games with Discounting<a class="headerlink" href="#repeated-games-with-discounting" title="Link to this heading">#</a></h2>
<p>Same setting as before, but after ever iteration there is a probability
<span class="math notranslate nohighlight">\(p\)</span> for the game to stop.</p>
<ul class="simple">
<li><p>the network gets shut down because of a lawsuit</p></li>
<li><p>you or your peer gets disconnected.</p></li>
</ul>
<p>This is equivalent to modeling infinite repetitions with a discounted
future</p>
<ul class="simple">
<li><p>there is some interest or inflation rate that decreases the value of
future payoffs</p></li>
<li><p>people subjectively value the future less than how much they value
today.</p></li>
</ul>
<p><strong>Grim trigger strategy</strong>: if there was ever a time where the other
player free-rides, then free-ride forever. Otherwise, upload.</p>
<p>Then, the other player’s optimal strategy is either to always upload or
never upload.</p>
<ul class="simple">
<li><p>Expected utility from always uploading is
<span class="math notranslate nohighlight">\(2 + 2(1-p) + 2(1-p)^2 + \cdots = \frac{2}{p}\)</span>.</p></li>
<li><p>Expected utility from never uploading is
<span class="math notranslate nohighlight">\(3 + 0(1-p) + 0(1-p)^2 + \cdots = 3\)</span>.</p></li>
</ul>
<p>Thus, the other player always uploads whenever <span class="math notranslate nohighlight">\(p &lt; 2/3\)</span> and both
players playing grim trigger is a subgame perfect Nash equilibrium.</p>
<div class="remark docutils">
<p><em>Remark 7</em>. Note that always uploading for both players is NOT a Nash
equilibrium as either player has a profitable deviation to always
free-ride. Observe that the Nash equilibrium of both players using
grim-trigger is strategically different but outcome equivalent.</p>
</div>
<p>For any run of the game, the number of iterations will be some number
<span class="math notranslate nohighlight">\(n\)</span>. But we proved earlier that for any <span class="math notranslate nohighlight">\(n\)</span>, the unique SPNE is for both
players to never upload. What changed? Players no longer know what <span class="math notranslate nohighlight">\(n\)</span>
is, so the logic of backwards induction no longer holds.</p>
<p>In practice, grim trigger is not very useful: what happens if there was
an accident and one person’s connection was down? Not a stable solution
concept.</p>
<p><strong>Tit for Tat</strong>: In stage one, upload. In all future stages, do whatever
the opponent did in the previous stage.</p>
<p>If one player commits to playing tit for tat, then the best response for
the other player is to always upload when <span class="math notranslate nohighlight">\(p &lt; 2/3\)</span> and free-ride
otherwise.</p>
</section>
<section id="bittorrent-strategies">
<h2>BitTorrent Strategies<a class="headerlink" href="#bittorrent-strategies" title="Link to this heading">#</a></h2>
<p>BitTorrent main P2P protocol for file-sharing (almost 30% of all upload
traffic). Users organized into swarms sharing the same file. A
decentralized tracker coordinates active uses in the swarm. Each file is
broken into pieces and all pieces are needed to complete a file.</p>
<p><strong>Default Strategy</strong>:</p>
<ul class="simple">
<li><p>Every 15-30 minutes, users contacts the tracker and requests a new
random subset of swarm peers. Number of known peers grows over time.</p></li>
<li><p>Each user attempts to download from its peers.</p></li>
<li><p>Each user has <span class="math notranslate nohighlight">\(s\)</span> slots and allocates <span class="math notranslate nohighlight">\(1/s\)</span>-fraction of upload
bandwidth to each slot.</p></li>
<li><p><span class="math notranslate nohighlight">\(s-1\)</span> peers to receive a slot chosen using a variant of tit-for-tat:
prioritize peers that sent you the most data (<span class="math notranslate nohighlight">\(s-1\)</span> as the last slot
is reserved fr pity uploads to random peers for optimistic
unchoking.)</p></li>
<li><p>For each peer, priority given to uploading rare pieces.</p></li>
</ul>
<p><strong>BitThief Strategy</strong>:</p>
<ul class="simple">
<li><p>Never upload anything.</p></li>
<li><p>Ask tracker for peers much more frequently so number of peers grows.</p></li>
</ul>
<p><strong>BitTyrant Strategy</strong>: send data to peers who <em>will</em> send you the most
data, not who <em>has</em> sent you the most data.</p>
<ul class="simple">
<li><p>For each peer <span class="math notranslate nohighlight">\(j\)</span>, estimate amount of upload <span class="math notranslate nohighlight">\(u_j\)</span> so <span class="math notranslate nohighlight">\(j\)</span> unchokes
you.</p></li>
<li><p>For each peer <span class="math notranslate nohighlight">\(j\)</span>&lt; estimate speed of download <span class="math notranslate nohighlight">\(d_j\)</span> if <span class="math notranslate nohighlight">\(j\)</span> unchokes
you</p></li>
<li><p>Prioritize sending as much data as possible to peer with maximum
<span class="math notranslate nohighlight">\(d_j/u_j\)</span>.</p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="market-equilibrium">
<h1>Market Equilibrium<a class="headerlink" href="#market-equilibrium" title="Link to this heading">#</a></h1>
<p>Previously, we studied situations with no transfers:</p>
<ol class="arabic simple">
<li><p>If Stanford housing auctioned rooms, the distribution would look
much different.</p></li>
<li><p>It is illegal in all countries (except Iran) to buy organs.</p></li>
<li><p>Hospitals and students matching with money is subject to anti-trust
laws.</p></li>
</ol>
<p>However, there are issues to restricting markets to operating without
money.</p>
<ol class="arabic simple">
<li><p>Can only work with ordinal opposed to cardinal preferences.</p></li>
<li><p>Underground markets may arise (college admissions scandals, black
markets for kidneys).</p></li>
<li><p>Could be issues with permissions (entering donor lists multiple
times using bots to try to get a match earlier).</p></li>
</ol>
<div class="definition docutils">
<p><strong>Definition 24</strong> (Game Equilbiria vs Market Equilbria). We have covered
four types of game equilbiria:</p>
<ul class="simple">
<li><p>Nash</p></li>
<li><p>Correlated</p></li>
<li><p>Stackelberg</p></li>
<li><p>Subgame Perfect Equilibrium (SPE)</p></li>
</ul>
<p>Today, we begin covering <em>market equilibria</em>.</p>
</div>
<div class="definition docutils">
<p><strong>Definition 25</strong> (Cardinal vs Ordinal Utilities). There are two main
ways to model utility:</p>
<ul class="simple">
<li><p>Cardinal: assigns some numeric value to how much someone likes
something.</p></li>
<li><p>Ordinal: comparison-based, only assigns some order.</p></li>
</ul>
<p>Cardinal utilities tell us more (we can always extract ordinal utilities
from cardinal utilities, but not the other way around) but humans think
more in terms of ordinal rankings. Cardinal utilities are also easier to
work with when doing expected utility calculations and can be normalized
to be in terms of (usually but not always) money.</p>
</div>
<div class="definition docutils">
<p><strong>Definition 26</strong> (Fungible vs Idiosyncratic). There are two types of
goods:</p>
<ul class="simple">
<li><p>Fungible goods have many interchangeable units for sale.</p></li>
<li><p>Idiosyncratic goods are unique.</p></li>
</ul>
<p>Many goods are somewhere in between: rides on ride-sharing apps are
fungible in terms of how the driver doesn’t matter too much, but can
also be idiosyncratic in terms of caring about where you go.</p>
</div>
<div class="definition docutils">
<p><strong>Definition 27</strong> (Supply and Demand Curves). From economics,</p>
<ul class="simple">
<li><p>A demand curve plots the total quantity of a good consumers are
willing to buy at all price levels.</p></li>
<li><p>A supply curve plots the total quantity of a good firms are willing
to sell at all price levels.</p></li>
</ul>
<p>By tradition, price is plotted on the <span class="math notranslate nohighlight">\(y\)</span>-axis and quantity is plotted
on the <span class="math notranslate nohighlight">\(x\)</span>-axis.</p>
</div>
<div class="remark docutils">
<p><em>Remark 8</em>. In general, demand is downward sloping (higher quantity
demanded as price decreases) and supply is upwards sloping (lower
quantity supplied as price decreases). However, this is not always the
case (different market structures like a monopoly, weird classes of
goods).</p>
</div>
<div class="definition docutils">
<p><strong>Definition 28</strong> (Market Clearing Price). The price where the supply
and demand curves meet is called the market clearing price. At this
price, the quantity demanded is equal to quantity demanded so all
interested buyers and sellers can transact (and hence clear the market).</p>
</div>
<section id="unit-demand-market-model">
<h2>Unit-Demand Market Model<a class="headerlink" href="#unit-demand-market-model" title="Link to this heading">#</a></h2>
<p>Setting:</p>
<ol class="arabic simple">
<li><p><span class="math notranslate nohighlight">\(m\)</span> different (idiosyncratic) goods for sale;</p></li>
<li><p><span class="math notranslate nohighlight">\(n\)</span> different buyers that will each purchase at most one good (they
have unit demand);</p></li>
<li><p>Buyer <span class="math notranslate nohighlight">\(i\)</span> as value <span class="math notranslate nohighlight">\(v_{i,j}\)</span> for purchasing good <span class="math notranslate nohighlight">\(j\)</span>;</p></li>
<li><p>If buyer <span class="math notranslate nohighlight">\(i\)</span> pays <span class="math notranslate nohighlight">\(p_j\)</span> to acquire good <span class="math notranslate nohighlight">\(j\)</span>, then their payoff is
$<span class="math notranslate nohighlight">\(U_{i,j} = v_{i,j} - p_j;\)</span>$</p></li>
<li><p>If buyer <span class="math notranslate nohighlight">\(i\)</span> doesn’t purchase any good, normalize outside utility to
be zero: $<span class="math notranslate nohighlight">\(U_{i, \varnothing} = 0.\)</span>$</p></li>
</ol>
<p>The solution concept we will use:</p>
<div class="definition docutils">
<p><strong>Definition 29</strong> (Competitive Equilibrium). A competitive equilibrium
is a price vector <span class="math notranslate nohighlight">\(p = (p_1,...,p_m)\)</span> and a matching
<span class="math notranslate nohighlight">\(M: \{1,2,...,n\} \to \{1,2,...,m\}\)</span> of buyers to goods such that:</p>
<ol class="arabic simple">
<li><p>Each buyer is matched with their favorite good given prices <span class="math notranslate nohighlight">\(p\)</span>: for
all <span class="math notranslate nohighlight">\(i,j\)</span> we have $<span class="math notranslate nohighlight">\(v_{i,M(i)} - p_{M(i)} &gt; v_{i,j} - p_j;\)</span>$</p></li>
<li><p>If no buyer is matched with good <span class="math notranslate nohighlight">\(j\)</span> then <span class="math notranslate nohighlight">\(p_j = 0\)</span>;</p></li>
<li><p>Buyer <span class="math notranslate nohighlight">\(i\)</span> is unmatched if for all goods <span class="math notranslate nohighlight">\(j\)</span>, we have
<span class="math notranslate nohighlight">\(v_{i,j} - p_j &lt; 0\)</span>.</p></li>
</ol>
</div>
<div class="remark docutils">
<p><em>Remark 9</em>. Conditions (1) and (3) implies that buyer <span class="math notranslate nohighlight">\(i\)</span> is unmatched
if <em>and only if</em> for all goods <span class="math notranslate nohighlight">\(j\)</span>, we have <span class="math notranslate nohighlight">\(v_{i,j} - p_j &lt; 0\)</span>. Then,
this stronger condition is equivalent to individual rationality: for all
buyers <span class="math notranslate nohighlight">\(i\)</span>, $<span class="math notranslate nohighlight">\(v_{i,M(i)} - p_i \geq 0.\)</span>$</p>
</div>
<p>In addition to equilibrium, we also care about welfare:</p>
<div class="definition docutils">
<p><strong>Definition 30</strong> (Social Welfare). The social welfare of an allocation
<span class="math notranslate nohighlight">\(M\)</span> is the sum of buyers’ values: $<span class="math notranslate nohighlight">\(U(M) = \sum_i v_{i,M(i)}.\)</span>$</p>
</div>
<div class="remark docutils">
<p><em>Remark 10</em>. Prices are not included because the total cost to buyers is
equal to total profit of sellers.</p>
</div>
</section>
<section id="properties-of-competitive-equilibrium">
<h2>Properties of Competitive Equilibrium<a class="headerlink" href="#properties-of-competitive-equilibrium" title="Link to this heading">#</a></h2>
<div class="theorem docutils">
<p><strong>Theorem 18</strong> (First Welfare Theorem). <em>If <span class="math notranslate nohighlight">\((p,M)\)</span> is a competitive
equilibrium, then <span class="math notranslate nohighlight">\(M\)</span> is a matching that maximizes social welfare: if
<span class="math notranslate nohighlight">\(M'\)</span> is any matching, we have
$<span class="math notranslate nohighlight">\(\sum_i v_{i,M(i)} \geq \sum_i v_{i,M'(i)}.\)</span>$</em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> By the definition of competitive equilibrium, we know
$<span class="math notranslate nohighlight">\(\sum_i (v_{i,M(i)}-p_{M(i)}) \geq \sum_i (v_{i,M'(i)}-p_{M'(i)})\)</span><span class="math notranslate nohighlight">\( as
\)</span>v_{i,M(i)}-p_{M(i)} \geq v_{i,M’(i)}-p_{M’(i)}<span class="math notranslate nohighlight">\( for all \)</span>i<span class="math notranslate nohighlight">\(. Then,
\)</span>\sum_i p_{M(i)} = \sum_i p_{M’(i)}<span class="math notranslate nohighlight">\( as \)</span>M,M’<span class="math notranslate nohighlight">\( are just permutations so
we get \)</span><span class="math notranslate nohighlight">\(\sum_i v_{i,M(i)} \geq \sum_i v_{i,M'(i)}.\)</span>$ ◻</p>
</div>
<div class="theorem docutils">
<p><strong>Theorem 19</strong> (Existence of Competitive Equilibrium). <em>In the
unit-demand market model with finite prices and finite increments, there
will always exist a competitive equilibrium.</em></p>
</div>
<div class="remark docutils">
<p><em>Remark 11</em>. In more nuanced models, competitive equilibrium does not
necessarily exist.</p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> We will construct a Deferred Acceptance with Prices algorithm
that gets us to competitive equilibrium. For each buyer, construct a
list of all (good, price) options ordered by utility (we can truncate
this list by not including anything worse than (receive nothing, pay
nothing), which is always an option). At each iteration of the
algorithm, every unmatched buyer whose next-favorite option is <span class="math notranslate nohighlight">\((j,p)\)</span>
proposes price <span class="math notranslate nohighlight">\(p\)</span> to good <span class="math notranslate nohighlight">\(j\)</span>. Then, good <span class="math notranslate nohighlight">\(j\)</span> tentatively accepts <span class="math notranslate nohighlight">\(p\)</span>
(in the deferred acceptance sense) if it is higher than the prices it
was previously offered. This algorithm will always terminate by the same
reasoning as why deferred acceptance always terminates. The resulting
match and prices when this algorithm terminates is a competitive
equilibrium:</p>
<ol class="arabic simple">
<li><p>Every buyer is matched with their favorite (good, price) pair as any
other pair must have led to the buyer being rejected at some
previous stage.</p></li>
<li><p>Each unmatched good has a price of zero as a good is unmatched if
and only if it was never proposed to.</p></li>
</ol>
<p>◻</p>
</div>
<div class="remark docutils">
<p><em>Remark 12</em>. DA with prices runs in <span class="math notranslate nohighlight">\(O(n \cdot m \cdot k)\)</span> time where
<span class="math notranslate nohighlight">\(k\)</span> is the number of price increments.</p>
</div>
<div class="proposition docutils">
<p><strong>Proposition 31</strong> (Properties of DA with Prices). Deferred acceptance
with prices is strategyproof and optimal for buyers.</p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> Follows directly from the same reasoning used to analyze
deferred acceptance. ◻</p>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="market-failures-2-1-2023">
<h1>Market Failures (2/1/2023)<a class="headerlink" href="#market-failures-2-1-2023" title="Link to this heading">#</a></h1>
<p>The assumption we previously made was that free markets naturally
converge to an optimal outcome. However, this clearly is not always the
case: market failures arise when markets fail to converge to an optimal
outcome.</p>
<section id="externalities-and-public-goods">
<h2>Externalities and Public Goods<a class="headerlink" href="#externalities-and-public-goods" title="Link to this heading">#</a></h2>
<p><strong>Externalities</strong> are side effects on individuals other than the buyer
or seller. <strong>Public goods</strong> are goods that are accessible and usable by
everyone but not owned by anyone. For example:</p>
<ul class="simple">
<li><p>The environment is a public good, and activities that harm the
environment (plane tickets) have negative externalities.</p></li>
<li><p>WiFi bandwidth is a public good, and one person’s usage imposes a
negative externality of slower connections on others.</p></li>
</ul>
<p>Two possible solutions.</p>
<ol class="arabic simple">
<li><p>Pigouvian tax: a tax on transactions proportional to the externality
they generate.</p></li>
<li><p>Coasian bargaining: auction off public goods and rely on the Coarse
Theorem to achieve social efficiency.</p></li>
</ol>
</section>
<section id="transaction-costs">
<h2>Transaction Costs<a class="headerlink" href="#transaction-costs" title="Link to this heading">#</a></h2>
<p>Also known as market frictions. Sometimes, transactions themselves can
be costly to execute leading to mutually beneficial transactions not
being made. For example:</p>
<ul class="simple">
<li><p>Agent one has a boat worth <span class="math notranslate nohighlight">\(9,900\)</span> to them and agent two is willing
to pay <span class="math notranslate nohighlight">\(10,000\)</span>.</p></li>
<li><p>Agent one can sell the boat to agent two and both would be happier
off.</p></li>
<li><p>However, if there is a <span class="math notranslate nohighlight">\(9\%\)</span> sales tax on boats, this transaction
would not occur.</p></li>
</ul>
<p>Transaction costs do not necessarily have to be monetary:</p>
<ul class="simple">
<li><p>A hungry student is willing to buy an apple for <span class="math notranslate nohighlight">\(10\)</span> while other
students have applies worth <span class="math notranslate nohighlight">\(1\)</span> to them.</p></li>
<li><p>Other students can sell the apple to the hungry student and both
would be better off.</p></li>
<li><p>However, there are time/information costs for the hungry student to
run around and ask other students if they have an apple on them.</p></li>
</ul>
</section>
<section id="market-thickness">
<h2>Market Thickness<a class="headerlink" href="#market-thickness" title="Link to this heading">#</a></h2>
<p><strong>A market is thick (thin)</strong> if there are many (few) buyers and sellers.
In thick markets, sellers and buyers have lots of options which makes
prices close to competitive equilibrium. In thin markets, there are few
buyers and if buyers come they face monopoly prices. Thick markets
generate welfare-maximizing outcomes while thin markets do not.</p>
<p>Why are monopolies bad? Monopoly quantity sold is lower than quantity
sold in competitive equilibrium; prices are higher and consumer surplus
is lower.</p>
<p>First welfare theorem holds with reserve prices to cover costs. However,
sellers setting reserve prices is not strategyproof.</p>
<div class="proof docutils">
<p><em>Proof.</em> If reserve prices are nonbinding, then sellers can increase
reserve prices by <span class="math notranslate nohighlight">\(\epsilon &gt; 0\)</span> and still sell. If prices are binding,
then the good is sold at the reserve price which is equal to cost and
the seller makes zero profit. Assuming the necessary assumptions,
sellers can increase reserve prices by <span class="math notranslate nohighlight">\(\epsilon\)</span> and make strictly
positive profit, which is a profitable deviation. ◻</p>
</div>
<p>Some ways to get around this:</p>
<ul class="simple">
<li><p>As markets become far from monopoly, it converges to a
seller-strategyproof mechanism (strategyproof-in-the-large).
However, this requires fungible goods in a thick market.</p></li>
<li><p>If the seller doesn’t know buyers’ valuations, then it is difficult
for sellers to set a reserve price. However, sellers collect lots of
data.</p></li>
</ul>
<p>How can markets be thickened?</p>
<ul class="simple">
<li><p>Encourage buyers and sellers to join and stay;</p></li>
<li><p>Merge markets (larger kidney donation markets have typically led to
better outcomes);</p></li>
<li><p>Batch transactions: wait a bit for more buyers and sellers to join
before running transactions.</p></li>
</ul>
</section>
<section id="timing-issues">
<h2>Timing Issues<a class="headerlink" href="#timing-issues" title="Link to this heading">#</a></h2>
<p><strong>Market Unraveling</strong>: In certain markets, one side has incentives to
make matches earlier and earlier (to get good students before
competitions hire them). As a result, before introduction of the
centralized matching mechanism for matching doctors and residencies even
first year med students would be matched. However, whether or not a
first year med student and a residency would be a good match is a bad
predictor of whether or not the student and the residency is still a
good match four years later.</p>
<p><strong>Exploding offers</strong>: Job offers that require a very short response
time. In markets where one side needs to look for other candidates if
turned down, short response times can arise. Amplified when:</p>
<ul class="simple">
<li><p>if there is a limited time window for transactions due to regulatory
issues;</p></li>
<li><p>if one side of the market can’t absorb variance in the number of
matches received.</p></li>
</ul>
<p><strong>Not waiting for markets to clear:</strong> APPIC rules for psychologists in
the 1970-1990’s:</p>
<ul class="simple">
<li><p>All transactions must occur on selection day;</p></li>
<li><p>Exploding offers are not allowed.</p></li>
</ul>
<p>In theory, the result should be similar to Deferred Acceptance. In
practice, employers didn’t want to propose to candidates who might
cancel right before the deadline leading to earlier and earlier “safe”
commits.</p>
<p>How to resolve timing issues? Centralized matching systems will help.
However, setting timing rules often fail due to incentives to violate
rules being too strong (“Would you like to visit my hospital [wink
wink]”?) Rules/norms that allow for accepting and then reneging from
exploding offers removes the incentives to cheat and make exploding
offers.</p>
</section>
<section id="information-asymmetries">
<h2>Information Asymmetries<a class="headerlink" href="#information-asymmetries" title="Link to this heading">#</a></h2>
<p>Sellers know more about the quality of goods than buyers. As such,
buyers might buy a good that they thought was worth it, but later find
out that the good is worse than expected. For example, the market for
lemons:</p>
<ul class="simple">
<li><p>Market for used cars, some good and some bad.</p></li>
<li><p>Buyers willing to pay more for good cars than bad cars but do not
know which type of car is which.</p></li>
<li><p>Sellers willing to sell bad cars for less and do know which car is
which.</p></li>
<li><p>Let <span class="math notranslate nohighlight">\(g \in [0,1]\)</span> be the fraction of cars in the market that are
good.</p></li>
<li><p>Let <span class="math notranslate nohighlight">\(h \leq g\)</span> be the fraction of cars that are in good condition
and also for sale.</p></li>
</ul>
<p>One bad equilibrium: only bad cars are sold at a low price and high cars
aren’t worth being sold at that low price.</p>
<p>One good equilibrium: if the portion of good cars is high enough, then
the expected value of a car and hence price of a car is high enough to
sustain good cars being sold.</p>
<p>Other examples where asymmetric information comes up:</p>
<ul class="simple">
<li><p>Health insurance: buyers know private information about their health
status, sellers want to sell insurance to healthier individuals.</p></li>
<li><p>Clickbait: content creators know if a link is clickbait or not while
users do not. Creators what to maximize clicks, users want to avoid
clickbait.</p></li>
</ul>
<p><strong>Adverse selection</strong>: situations where only the low quality
goods/lemons stay in the market.</p>
<p>Possible solutions:</p>
<ul class="simple">
<li><p>Provide more information to both sides (mandatory disclosures,
reputation systems);</p></li>
<li><p>Disallow use of information (universal health care, anti-insider
trading regulations);</p></li>
<li><p>Filter out lemons (require warranties).</p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="single-unit-auctions-2-6-2023">
<h1>Single-Unit Auctions (2/6/2023)<a class="headerlink" href="#single-unit-auctions-2-6-2023" title="Link to this heading">#</a></h1>
<p>Auctions are useful in many situations. For instance, if the price of a
good is unknown (a market for this product, for one reason or another,
might not converge to some equilibrium price) auctions can be useful for
price discovery. For instance:</p>
<ol class="arabic simple">
<li><p>Monopolies (wireless spectrum auctions);</p></li>
<li><p>Niche products (rare used items on eBay);</p></li>
<li><p>Product with very specific attributes (ad auctions).</p></li>
</ol>
<p>Another situation where auctions are useful is when buyers have the
computational power and patience to bid:</p>
<ol class="arabic simple">
<li><p>Expensive items (wireless spectrum);</p></li>
<li><p>Automated bidders (ad auctions).</p></li>
</ol>
<p>There are many interactions between auctions and CS:</p>
<ol class="arabic simple">
<li><p>Auctions fund a lot of computer scientists (ad auctions);</p></li>
<li><p>Fast auctions require algorithmic bidders (ad auctions);</p></li>
<li><p>Complex auctions require algorithmic auctioneers.</p></li>
</ol>
<section id="case-of-one-buyer">
<h2>Case of One Buyer<a class="headerlink" href="#case-of-one-buyer" title="Link to this heading">#</a></h2>
<p>Motivation: digital goods. Suppose there is a pool of users subscribed
to a free product. What price should be charged to maximize revenue?</p>
<p>Aggregating users’ willingness to pay induces a demand curve for the
good. Then, revenue is equal to the price multiplied by the number of
people with willingness to pay more than that price.</p>
<p>Roger Myerson (1981) showed that given some demand curve <span class="math notranslate nohighlight">\(D\)</span>, there is a
formula <span class="math notranslate nohighlight">\(p(D)\)</span> that maximizes revenue. This is the profit maximizing
price.<a class="footnote-reference brackets" href="#id16" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></a></p>
<p>Another motivation: ad auctions with specialized advertisers so only one
advertiser wants each ad spot. Sellers do not know exactly how much an
advertiser is willing to pay, but have prior beliefs over the buyer’s
value. In this interpretation, the prior over values can be taken as a
demand curve.</p>
</section>
<section id="case-of-multiple-buyers">
<h2>Case of Multiple Buyers<a class="headerlink" href="#case-of-multiple-buyers" title="Link to this heading">#</a></h2>
<p><strong>Model</strong>:</p>
<ol class="arabic simple">
<li><p>There is a set of bidders <span class="math notranslate nohighlight">\(I\)</span> with each bidder <span class="math notranslate nohighlight">\(i\)</span> having a value
<span class="math notranslate nohighlight">\(v_i\)</span> for getting the item.</p></li>
<li><p>Each bidder knows their own value, the seller does not know bidders’
values but has some prior belief over values.</p></li>
<li><p>Bidder <span class="math notranslate nohighlight">\(i\)</span>’s payoff while paying <span class="math notranslate nohighlight">\(p_i\)</span> is <span class="math notranslate nohighlight">\(v_i - p_i\)</span> if they get
the item and <span class="math notranslate nohighlight">\(-p_i\)</span> otherwise.</p></li>
</ol>
<p>We will focus on sealed-bid auctions:</p>
<div class="tcolorbox docutils">
<ol class="arabic simple">
<li><p>Each bidder submits a bid <span class="math notranslate nohighlight">\(b_i\)</span>, which is unobserved by other
bidders;</p></li>
<li><p>Highest bidder <span class="math notranslate nohighlight">\(i^* = \arg\max_{i \in I}\{b_i\}\)</span> gets the item and
pays <span class="math notranslate nohighlight">\(b_{i^*}\)</span>.</p></li>
</ol>
</div>
<p>Immediately, bidders will bid lower than their value <span class="math notranslate nohighlight">\(v_i\)</span>: for all
<span class="math notranslate nohighlight">\(i \in I\)</span> we have that <span class="math notranslate nohighlight">\(b_i &lt; v_i\)</span> in equilibrium. Intuitively, we
expect bids to grow up as competition increases.</p>
<div class="tcolorbox docutils">
<ol class="arabic simple">
<li><p>Each bidder submits a bid <span class="math notranslate nohighlight">\(b_i\)</span>, which is unobserved by other
bidders;</p></li>
<li><p>Highest bidder <span class="math notranslate nohighlight">\(i^* = \arg\max_{i \in I}\{b_i\}\)</span> gets the item;</p></li>
<li><p><em>Every</em> bidder <span class="math notranslate nohighlight">\(i \in I\)</span> pays <span class="math notranslate nohighlight">\(b_i\)</span>.</p></li>
</ol>
</div>
<p>Not used to auctions things in practice, but used to model other
situations (interest groups donating to a politician, animals hunting
for food). In this model, bidders will still bid lower than their value
and will generally bid lower than their first-price value.</p>
<div class="tcolorbox docutils">
<ol class="arabic simple">
<li><p>Each bidder submits a bid <span class="math notranslate nohighlight">\(b_i\)</span>, which is unobserved by other
bidders;</p></li>
<li><p>Highest bidder <span class="math notranslate nohighlight">\(i^* = \arg\max_{i \in I}\{b_i\}\)</span> gets the item and
pays the second highest price <span class="math notranslate nohighlight">\(\max_{i \neq i^*} b_i\)</span>.</p></li>
</ol>
</div>
<div class="theorem docutils">
<p><strong>Theorem 20</strong> (Equilibrium in Second Price Auction). <em>Second-price
auctions are strategyproof ao truthful bidding is a dominant strategy
and hence everyone bidding truthfully is an equilibrium.</em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> Fix all bids of other people <span class="math notranslate nohighlight">\(b_j\)</span> for <span class="math notranslate nohighlight">\(j \neq i\)</span>. We will show
that bidding <span class="math notranslate nohighlight">\(b_i = v_i\)</span> is optimal for bidder <span class="math notranslate nohighlight">\(i\)</span>. Let
$<span class="math notranslate nohighlight">\(b^{(-i)} = \max_{j \neq i} b_j.\)</span>$ There are two cases:</p>
<ol class="arabic simple">
<li><p>If <span class="math notranslate nohighlight">\(v_i &lt; b^{(-i)}\)</span> then <span class="math notranslate nohighlight">\(i\)</span> prefers to not win than to pay
<span class="math notranslate nohighlight">\(b^{(-i)}\)</span> so any <span class="math notranslate nohighlight">\(b_i &lt; b^{(-i)}\)</span> is optimal. In particular,
<span class="math notranslate nohighlight">\(b_i = v_i\)</span> is an optimal bid.</p></li>
<li><p>If <span class="math notranslate nohighlight">\(v_i &gt; b^{(-i)}\)</span> then <span class="math notranslate nohighlight">\(i\)</span> prefers to win and pay <span class="math notranslate nohighlight">\(b^{(-i)}\)</span> than
not winning. Thus, any <span class="math notranslate nohighlight">\(v_i &gt; b^{(-i)}\)</span> is optimal and in
particular, <span class="math notranslate nohighlight">\(b_i = v_i\)</span> is an optimal bid.</p></li>
</ol>
<p>◻</p>
</div>
<div class="theorem docutils">
<p><strong>Theorem 21</strong> (Payoffs of Second Price Auctions). <em>The second price
auction is individual rational in equilibrium: if <span class="math notranslate nohighlight">\(b_i = v_i\)</span> for all
<span class="math notranslate nohighlight">\(i\)</span>, then <span class="math notranslate nohighlight">\(v_i - p_i \geq 0\)</span> for all <span class="math notranslate nohighlight">\(i\)</span>.</em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> If <span class="math notranslate nohighlight">\(i\)</span> doesn’t win, then their payoff is <span class="math notranslate nohighlight">\(0\)</span>. If they do win,
then the price they pay is upper bounded by their valuation, so
<span class="math notranslate nohighlight">\(v_i - p_i \geq v_i - v_i = 0\)</span>. ◻</p>
</div>
<div class="theorem docutils">
<p><strong>Theorem 22</strong> (Optimality). <em>In equilibrium, the second price auction
allocates the good to the bidder with the highest value.</em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> In equilibrium, <span class="math notranslate nohighlight">\(v_i = b_i\)</span> for all <span class="math notranslate nohighlight">\(i\)</span> so
<span class="math notranslate nohighlight">\(\arg\max_i b_i = \arg\max_i v_i\)</span>. ◻</p>
</div>
</section>
<section id="revenue-maximization">
<h2>Revenue Maximization<a class="headerlink" href="#revenue-maximization" title="Link to this heading">#</a></h2>
<div class="example docutils">
<p><strong>Example 32</strong> (Full Information). Suppose <span class="math notranslate nohighlight">\(A\)</span> values the good at <span class="math notranslate nohighlight">\(1\)</span>
and <span class="math notranslate nohighlight">\(B\)</span> values the good at <span class="math notranslate nohighlight">\(2\)</span>. In a second price auction, both bid
truthfully and <span class="math notranslate nohighlight">\(B\)</span> wins at a price of <span class="math notranslate nohighlight">\(1\)</span>. In a first price auction, the
unique equilibrium is <span class="math notranslate nohighlight">\(A\)</span> bids <span class="math notranslate nohighlight">\(1\)</span> and <span class="math notranslate nohighlight">\(B\)</span> bids <span class="math notranslate nohighlight">\(1 + \epsilon\)</span> and
revenue is <span class="math notranslate nohighlight">\(1+\epsilon\)</span> which is basically equivalent to <span class="math notranslate nohighlight">\(1\)</span>.</p>
</div>
<p>To analyze the case with uncertainty and Bayesian agents, we need to
define a new notion of equilibrium.</p>
<div class="definition docutils">
<p><strong>Definition 33</strong> (Bayesian Nash Equilibrium). A Bayesian Nash
Equilibrium is a strategy profile such that each player is maximizing
their own payoff with respect to the posterior belief generated by
others’ strategies.</p>
</div>
<div class="example docutils">
<p><strong>Example 34</strong> (Bayesian Agents). Suppose <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(B\)</span> both have values
drawn uniformly from <span class="math notranslate nohighlight">\([0,1]\)</span>. In a second price auction, expected payoff
is <span class="math notranslate nohighlight">\(\mathbb{E}\left[\min\{v_A,v_B\}|v_A,v_B \sim Uni[0,1]\right] = 1/3.\)</span>
In a first price auction, the equilibrium is <span class="math notranslate nohighlight">\(b_A = v_A/2, b_B = v_B/2\)</span>
and in expectation, revenue is
$<span class="math notranslate nohighlight">\(\mathbb{E}\left[\max\{b_A,b_B\}\right] = \mathbb{E}\left[\max\{v_A,v_B\}/2\right] = 1/3.\)</span>$</p>
</div>
<p>It turns out that these auctions generate the same revenue:</p>
<div class="theorem docutils">
<p><strong>Theorem 23</strong> (Revenue Equivalence). <em>At equilibrium, expected payments
are fully determined by the auction’s allocation rule.</em></p>
</div>
<div class="corollary docutils">
<p><strong>Corollary 1</strong>. <em>Taking the auction’s allocation rule to be the one
that gives the item to the bidder with the highest bid, first, second,
and all-pay auctions generate the same revenue in Bayes-Nash
Equilibria.</em></p>
</div>
<p>It is not always the case that auctions always give the good to the
max-value bidder:</p>
<ol class="arabic simple">
<li><p>There can be overbidding in second price auctions (<span class="math notranslate nohighlight">\(A\)</span> bids <span class="math notranslate nohighlight">\(v_B+1\)</span>,
<span class="math notranslate nohighlight">\(B\)</span> bids <span class="math notranslate nohighlight">\(0\)</span> is an equilibrium but doesn’t give the good to the
max-value bidder if <span class="math notranslate nohighlight">\(v_A &lt; v_B\)</span>);</p></li>
<li><p>In an all-pay auction, there can be equilibria where the highest
value bidder does not get the item;</p></li>
<li><p>In auctions with reserve prices, it could be the case that no bidder
gets the item.</p></li>
</ol>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="sponsored-search-auctions-2-8-2023">
<h1>Sponsored Search Auctions (2/8/2023)<a class="headerlink" href="#sponsored-search-auctions-2-8-2023" title="Link to this heading">#</a></h1>
<p>Used to auction ad slots on websites. Model:</p>
<ol class="arabic simple">
<li><p>There are <span class="math notranslate nohighlight">\(N\)</span> slots with slot <span class="math notranslate nohighlight">\(j \in N\)</span> having associated
click-through rate <span class="math notranslate nohighlight">\(\alpha_j\)</span> which is assumed to only depend on <span class="math notranslate nohighlight">\(j\)</span>
(so for instance, quality of the ad itself does not matter);</p></li>
<li><p>There are <span class="math notranslate nohighlight">\(M\)</span> advertisers with advertiser <span class="math notranslate nohighlight">\(i \in M\)</span> having a value
of <span class="math notranslate nohighlight">\(v_i\)</span> per click;</p></li>
<li><p>An allocation is a function <span class="math notranslate nohighlight">\(A: N \to M\)</span> that matches the <span class="math notranslate nohighlight">\(i\)</span>th slot
to the <span class="math notranslate nohighlight">\(A(i)\)</span>th advertiser;</p></li>
<li><p>Define social welfare to be $<span class="math notranslate nohighlight">\(W(A) = \sum_j v_{A(j)} \alpha_j.\)</span>$</p></li>
</ol>
<p>What is the optimal allocation <span class="math notranslate nohighlight">\(A\)</span> to maximize <span class="math notranslate nohighlight">\(W\)</span>?</p>
<div class="tcolorbox docutils">
<ol class="arabic simple">
<li><p>Ask each advertiser for a bid <span class="math notranslate nohighlight">\(b_i\)</span>;</p></li>
<li><p>Assign highest bid to first slot, second highest bid to second slot,
etc;</p></li>
<li><p>For each slot <span class="math notranslate nohighlight">\(j\)</span>, advertiser <span class="math notranslate nohighlight">\(A(j)\)</span> pays <span class="math notranslate nohighlight">\(b_{A(j+1)}\)</span>.</p></li>
</ol>
</div>
<div class="remark docutils">
<p><em>Remark 13</em>. With the special case of one slot <span class="math notranslate nohighlight">\(j=1\)</span>, GSP is equivalent
to the second price auction.</p>
</div>
<p>The allocation rule in step two maximizes $<span class="math notranslate nohighlight">\(\sum_j b_{A(j)}\alpha_j.\)</span>$
However, GSP is not strategyproof: some advertisers may prefer to win a
lower slot at an even lower price than a higher slot at a high price.</p>
<section id="vickrey-clarke-groves-mechanism">
<h2>Vickrey-Clarke-Groves Mechanism<a class="headerlink" href="#vickrey-clarke-groves-mechanism" title="Link to this heading">#</a></h2>
<div class="definition docutils">
<p><strong>Definition 35</strong> (Externality). The externality of agent <span class="math notranslate nohighlight">\(i\)</span> is the
difference in utility for all other agents when <span class="math notranslate nohighlight">\(i\)</span> is present versus
when <span class="math notranslate nohighlight">\(i\)</span> is not.</p>
</div>
<div class="example docutils">
<p><strong>Example 36</strong>. Suppose <span class="math notranslate nohighlight">\(v_1 &gt; v_2 &gt; v_3\)</span> and there are two slots. In a
welfare-optimal outcome, <span class="math notranslate nohighlight">\(1\)</span> gets <span class="math notranslate nohighlight">\(v_1 \alpha_1\)</span> for the top slot, <span class="math notranslate nohighlight">\(2\)</span>
gets <span class="math notranslate nohighlight">\(v_2 \alpha_2\)</span> for the top slot, and <span class="math notranslate nohighlight">\(3\)</span> gets nothing. If <span class="math notranslate nohighlight">\(1\)</span> were
not present, <span class="math notranslate nohighlight">\(2\)</span> gets <span class="math notranslate nohighlight">\(v_2 \alpha_1\)</span> and <span class="math notranslate nohighlight">\(3\)</span> gets <span class="math notranslate nohighlight">\(v_3 \alpha_2\)</span>. Thus,
<span class="math notranslate nohighlight">\(1\)</span>’s externality is $<span class="math notranslate nohighlight">\((v_2 \alpha_2) - (v_2 \alpha_1 + v_2 \alpha_1).\)</span>$</p>
</div>
<div class="tcolorbox docutils">
<ol class="arabic simple">
<li><p>Ask each bidder for their valuation;</p></li>
<li><p>Find the welfare-maximizing allocation with respect to solicited
bids in step <span class="math notranslate nohighlight">\(1\)</span>;</p></li>
<li><p>Allocate slots via the welfare-maximizing allocation;</p></li>
<li><p>For each bidder <span class="math notranslate nohighlight">\(i\)</span>:</p>
<ol class="arabic simple">
<li><p>Find the allocation that maximizes welfare for all agents other
than <span class="math notranslate nohighlight">\(i\)</span>;</p></li>
<li><p>Set <span class="math notranslate nohighlight">\(i\)</span>’s payment equal to the difference between how satisfied
everyone else is when <span class="math notranslate nohighlight">\(i\)</span> is present versus when <span class="math notranslate nohighlight">\(i\)</span> is not.</p></li>
</ol>
</li>
</ol>
</div>
<div class="theorem docutils">
<p><strong>Theorem 24</strong> (Strategyproofness). <em>The VCG auction is dominant
strategy incentive compatible.</em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> Bidder <span class="math notranslate nohighlight">\(i\)</span>’s payoff is $<span class="math notranslate nohighlight">\(\begin{split}
			v_i(X) - p_i(X) &amp;= v_i(X) + \sum_{k \neq i} b_k(X) -  \sum_{k \neq i} b_k(X^{-i}).
		\end{split}\)</span><span class="math notranslate nohighlight">\( However, \)</span>\sum_{k \neq i} b_k(X^{-i})<span class="math notranslate nohighlight">\( does not depend on
the bid \)</span>i<span class="math notranslate nohighlight">\( submits so \)</span>i<span class="math notranslate nohighlight">\('s maximization problem is equivalent to
maximizing \)</span>v_i(X) + \sum_{k \neq i} b_k(X)$. Since the VCG mechanism
already chooses the socially optimal outcome, it is a dominant strategy
for all individuals to truthfully report. ◻</p>
</div>
<p>In the context of sponsored search auctions, the assignment rule is
still the same (highest bidder gets first slot, second highest bidder
gets second slot, etc.) but payments are different. For slot <span class="math notranslate nohighlight">\(\alpha_j\)</span>,
advertiser <span class="math notranslate nohighlight">\(A(j)\)</span> pays $<span class="math notranslate nohighlight">\(\sum_{k &gt; j} b_{A(k)}(\alpha_{k-1}-\alpha_k).\)</span>$</p>
<p>Another nice property of VCG auctions is that it is envy-free:</p>
<div class="definition docutils">
<p><strong>Definition 37</strong> (Envy-Free). An assignment <span class="math notranslate nohighlight">\((A,p)\)</span> consisting of an
allocation rule and prices is envy-free if for all advertisers <span class="math notranslate nohighlight">\(i,j\)</span>,
advertiser <span class="math notranslate nohighlight">\(i\)</span> does not envy advertiser <span class="math notranslate nohighlight">\(j\)</span>: <span class="math notranslate nohighlight">\(i\)</span>’s utility is (weakly)
greater than <span class="math notranslate nohighlight">\(i\)</span>’s utility if they got <span class="math notranslate nohighlight">\(j\)</span>’s slot and paid <span class="math notranslate nohighlight">\(j\)</span>’s price.</p>
</div>
<p>In the context of sponsored search auctions, this means that
$<span class="math notranslate nohighlight">\(\alpha_{A^{-1}(i)}(v_i-p_i) \geq \alpha_{A^{-1}(j)}(v_i-p_j)\)</span><span class="math notranslate nohighlight">\( for all
\)</span>i,j \in M$.</p>
</section>
<section id="unnatural-equilibria">
<h2>Unnatural Equilibria<a class="headerlink" href="#unnatural-equilibria" title="Link to this heading">#</a></h2>
<div class="example docutils">
<p><strong>Example 38</strong>. Suppose there is a single item and there are two bidders
with <span class="math notranslate nohighlight">\(v_A = 10, v_B = 9\)</span>. One equilibrium is <span class="math notranslate nohighlight">\(b_A = 7, b_B = 100\)</span>. Then,
<span class="math notranslate nohighlight">\(B\)</span> wins the auction and pays <span class="math notranslate nohighlight">\(\$7\)</span>. This is an equilibrium (exercise
for the reader to check this).</p>
</div>
<p>While no bidder has a profitable deviation, this outcome is not envy
free: <span class="math notranslate nohighlight">\(A\)</span> would rather get <span class="math notranslate nohighlight">\(B\)</span>’s outcome than their current outcome.
Adding the envy free requirement gets the following:</p>
<div class="theorem docutils">
<p><strong>Theorem 25</strong> (Refinement of Eq). <em>There is a correspondence between
the following:</em></p>
<ul class="simple">
<li><p><em>Envy-free equilibria of the GSP action;</em></p></li>
<li><p><em>Competitive market equilibria;</em></p></li>
<li><p><em>Stable matchings between buyers and (price,good) pairs.</em></p></li>
</ul>
</div>
<p>As such, we can get two immediate corollaries:</p>
<ul class="simple">
<li><p>We can efficiently find equilibria using deferred acceptance with
prices.</p></li>
<li><p>The buyer-optimal (seller-worst) equilibrium corresponds to VCG
payments.</p></li>
</ul>
</section>
<section id="gsp-vs-vcg-in-practice">
<h2>GSP vs VCG in Practice<a class="headerlink" href="#gsp-vs-vcg-in-practice" title="Link to this heading">#</a></h2>
<p>History:</p>
<ul class="simple">
<li><p>In late 1990’s: Overture runs first price auctions;</p></li>
<li><p>Early 2000’s: Google, Yahoo, Bing start running GSP auctions;</p></li>
<li><p>Late 2000’s: Facebook runs auctions using VCG;</p></li>
<li><p>Late 2010’s: Google switches back to first price auctions.</p></li>
</ul>
<p>Why the switch back to first price auctions? Many advertisers
participate in different auctions using the same bids, and given fixed
bids a first price auction makes more money than GSP, which makes more
money than VCG.</p>
<p>Another trend: auctions are sensitive to bidder collusion.</p>
<ul class="simple">
<li><p>2005: Bidding software must be authorized by search engine (easy to
prevent collusion);</p></li>
<li><p>Early 2010’s: most ad bidding is through a small number of agencies
(bad for competition and revenue);</p></li>
<li><p>Late 2010’s: ML based auto-bidders on Google, Bing, etc.</p></li>
</ul>
<p>What about now? General move away from explicit auction rules:</p>
<ul class="simple">
<li><p>Auction details are highly optimized and hard to understand (a lot
of things are ML);</p></li>
<li><p>Big tech companies often know vales better than bidders (so they
provide in-house bidders);</p></li>
<li><p>Advertisers exploit the fact that different companies have to
compete (less incentive to explain rules).</p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="pacing-equilibrium-in-first-price-auction-markets-guest-lecture">
<h1>Pacing Equilibrium in First-Price Auction Markets (Guest Lecture)<a class="headerlink" href="#pacing-equilibrium-in-first-price-auction-markets-guest-lecture" title="Link to this heading">#</a></h1>
<p>Setting: bidding for ad slots. However, ad slots are dynamically sold
over and over as users arrive over time. Furthermore, companies have
budgets over all occurrences of the auction. What’s the impact of
extending our model to 1. multiple auctions and 2. budgets?</p>
<div class="example docutils">
<p><strong>Example 39</strong>. Suppose there are two auctions and bidder <span class="math notranslate nohighlight">\(i\)</span> has value
<span class="math notranslate nohighlight">\(v_{i,1} = 2\)</span> in the first auction and <span class="math notranslate nohighlight">\(v_{i,2} = 2\)</span> in the second
auction. Bidder <span class="math notranslate nohighlight">\(i\)</span> has a budget of <span class="math notranslate nohighlight">\(3\)</span>.</p>
<p>If <span class="math notranslate nohighlight">\(v_{-i,1} = 1.6; v_{-i,2} = 1.7\)</span>, bidder <span class="math notranslate nohighlight">\(i\)</span> cannot win both auctions
as then they would need to pay <span class="math notranslate nohighlight">\(3.3&gt;3\)</span>. As such, <span class="math notranslate nohighlight">\(i\)</span> would want to win
the first auction and receive a payoff of <span class="math notranslate nohighlight">\(0.4\)</span> but not the second
auction, which would only give a payoff of <span class="math notranslate nohighlight">\(0.3\)</span>. Thus, <span class="math notranslate nohighlight">\(i\)</span> would not
want to bid truthfully in the second auction.</p>
<p>Similarly, bidder <span class="math notranslate nohighlight">\(i\)</span> might want to conserve their budget for the second
auction and shade their bid in the first auction (take
<span class="math notranslate nohighlight">\(v_{-i,1} = 1.9, v_{-i,2} = 1.7\)</span>).</p>
</div>
<p>As such, repeated second price auctions with budgets may no longer be
strategyproof. In the presence of budgets, what are the ecosystem
properties of first price auctions?</p>
<section id="model">
<h2>Model<a class="headerlink" href="#model" title="Link to this heading">#</a></h2>
<p><strong>Input:</strong></p>
<ol class="arabic simple">
<li><p>Set of buyers <span class="math notranslate nohighlight">\(N = \{1,2,...,n\}\)</span> with generic element <span class="math notranslate nohighlight">\(i\)</span>;</p></li>
<li><p>Set of divisible goods <span class="math notranslate nohighlight">\(M = \{1,2,...,m\}\)</span> with generic element <span class="math notranslate nohighlight">\(j\)</span>;</p></li>
<li><p>Each buyer has a valuation for each good <span class="math notranslate nohighlight">\(v_{i,j} \geq 0\)</span> and a
budget <span class="math notranslate nohighlight">\(B_i &gt; 0\)</span>.</p></li>
</ol>
<p><strong>Find:</strong></p>
<ol class="arabic simple">
<li><p>Pacing multipliers <span class="math notranslate nohighlight">\(\alpha_i \in [0,1]\)</span>;</p></li>
<li><p>Fractional allocation <span class="math notranslate nohighlight">\(x_{i,j} \in [0,1]\)</span></p></li>
</ol>
<p>such that bidding <span class="math notranslate nohighlight">\(\alpha_i \cdot v_{i,j}\)</span> in auction <span class="math notranslate nohighlight">\(j\)</span> does not
exceed the budget over the entire campaign.</p>
<p>Then, buyer <span class="math notranslate nohighlight">\(i\)</span> bids <span class="math notranslate nohighlight">\(\alpha_i \cdot v_{i,j}\)</span> for good <span class="math notranslate nohighlight">\(j\)</span> which is then
sold in first-price auction.</p>
<div class="remark docutils">
<p><em>Remark 14</em>. This is a static problem in the sense that all inputs are
known immediately. All valuations and budgets are known and there is no
strategic reporting.</p>
</div>
<div class="definition docutils">
<p><strong>Definition 40</strong> (Budget-Feasible Pacing Multipliers (BFPM)). A set of
BFPM’s is a set of pacing multipliers <span class="math notranslate nohighlight">\(\alpha\)</span> and an allocation <span class="math notranslate nohighlight">\(x\)</span>
such that:</p>
<ol class="arabic simple">
<li><p>Unit price <span class="math notranslate nohighlight">\(p_j = \max_{i \in N} \alpha_i v_{i,j}\)</span>;</p></li>
<li><p>Goods go to highest bidders: <span class="math notranslate nohighlight">\(x_{i,j} &gt; 0\)</span> implies
<span class="math notranslate nohighlight">\(\alpha_iv_{i,j} = \max_{i' \in N} \alpha_i v_{i,j}\)</span>;</p></li>
<li><p>Demanded goods are sold completely: <span class="math notranslate nohighlight">\(p_j &gt; 0\)</span> implies
<span class="math notranslate nohighlight">\(\sum_{i \in N} x_{i,j} = 1\)</span>;</p></li>
<li><p>No overselling: <span class="math notranslate nohighlight">\(\sum_{i \in N} x_{i,j} \leq 0\)</span> for all <span class="math notranslate nohighlight">\(j\)</span>;</p></li>
<li><p>Budget feasible: <span class="math notranslate nohighlight">\(\sum_{j \in M} x_{i,j} p_j \leq B_i\)</span> for all <span class="math notranslate nohighlight">\(i\)</span>.</p></li>
</ol>
</div>
<div class="remark docutils">
<p><em>Remark 15</em>. One (trivial) solution will always be <span class="math notranslate nohighlight">\(\alpha_i = 0\)</span> for
all <span class="math notranslate nohighlight">\(i\)</span> and any allocation that satisfies no overselling.</p>
</div>
<div class="definition docutils">
<p><strong>Definition 41</strong> (First-Price Pacing Equilibrium (FPPE)). A first-price
pacing equilibrium is a set of multipliers <span class="math notranslate nohighlight">\(\alpha\)</span> and an allocation
<span class="math notranslate nohighlight">\(x\)</span> such that</p>
<ol class="arabic simple">
<li><p><span class="math notranslate nohighlight">\((\alpha,x)\)</span> is a BFPM;</p></li>
<li><p>No unnecessary pacing: <span class="math notranslate nohighlight">\(\sum_{j \in M} x_{i,j} \cdot p_j &lt; B_i\)</span>
implies <span class="math notranslate nohighlight">\(\alpha_i = 1\)</span>.</p></li>
</ol>
</div>
</section>
<section id="properties-of-fppe">
<h2>Properties of FPPE<a class="headerlink" href="#properties-of-fppe" title="Link to this heading">#</a></h2>
<div class="proposition docutils">
<p><strong>Proposition 42</strong> (Existence). There exists a Pareto-dominant BFPM.
This BFPM does not have any unnecessarily paced bidders. Thus, it is an
FPPE.</p>
</div>
<div class="proposition docutils">
<p><strong>Proposition 43</strong> (Uniqueness). Any BFPM that is dominated by some
other BFPM must have at least one unnecessarily paced bidder, so FPPE
are essentially unique.</p>
</div>
<div class="proposition docutils">
<p><strong>Proposition 44</strong> (Revenue Dominance). If <span class="math notranslate nohighlight">\((\alpha^{(1)},x^{(1)})\)</span> and
<span class="math notranslate nohighlight">\((\alpha^{(2)},x^{(2)})\)</span> are both BFPMs with
<span class="math notranslate nohighlight">\(\alpha^{(1)} \geq \alpha^{(2)}\)</span>, then we must have that the revenue in
<span class="math notranslate nohighlight">\((\alpha^{(1)},x^{(1)})\)</span> is weakly greater than the revenue in
<span class="math notranslate nohighlight">\((\alpha^{(2)},x^{(2)})\)</span>.</p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> We will show that prices nor quantity sold can decrease. First,
prices cannot decrease as <span class="math notranslate nohighlight">\(p_j = \max_{i \in N} \alpha_i v_{i,j}\)</span>,
weakly increasing <span class="math notranslate nohighlight">\(\alpha\)</span> cannot decrease prices. Next, since both
<span class="math notranslate nohighlight">\((\alpha^{(1)},x^{(1)})\)</span> and <span class="math notranslate nohighlight">\((\alpha^{(2)},x^{(2)})\)</span> are BFPMs, all
demanded goods are sold completely. Since weakly increasing <span class="math notranslate nohighlight">\(\alpha\)</span>
cannot turn change a good from being demanded to not being demanded,
quantity sold cannot decrease. ◻</p>
</div>
<div class="proposition docutils">
<p><strong>Proposition 45</strong> (Adding a Good). In FPPE, adding a good weakly
increases revenue.</p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> Let <span class="math notranslate nohighlight">\((\alpha,x)\)</span> be the FPPE for <span class="math notranslate nohighlight">\(N,M\)</span>. Let <span class="math notranslate nohighlight">\((\alpha',x')\)</span> be
the FPPE for <span class="math notranslate nohighlight">\(N, M \cup \{j\}\)</span> for some <span class="math notranslate nohighlight">\(j \notin M\)</span>. Define
<span class="math notranslate nohighlight">\(T = \{i: \alpha_i' \geq \alpha_i\}\)</span> and
<span class="math notranslate nohighlight">\(N \setminus T = \{i: \alpha_i' &lt; \alpha_i\}\)</span>. Then,</p>
<ol class="arabic simple">
<li><p>Collectively, <span class="math notranslate nohighlight">\(T\)</span> spends at least as much in <span class="math notranslate nohighlight">\((\alpha',x')\)</span> as
<span class="math notranslate nohighlight">\((\alpha,x)\)</span>: If someone from <span class="math notranslate nohighlight">\(T\)</span> won a good before, it must still
be someone from <span class="math notranslate nohighlight">\(T\)</span> winning the same good. Clearly, prices of goods
won by <span class="math notranslate nohighlight">\(T\)</span> cannot decrease.</p></li>
<li><p>Collectively, <span class="math notranslate nohighlight">\(N \setminus T\)</span> spends at least as much in
<span class="math notranslate nohighlight">\((\alpha',x')\)</span> as <span class="math notranslate nohighlight">\((\alpha,x)\)</span>: for any buyer in <span class="math notranslate nohighlight">\(N \setminus T\)</span>,
their pacing multiplier <span class="math notranslate nohighlight">\(\alpha_i'\)</span> is strictly less than one, which
means they are spending their entire budgets in the new FPPE.</p></li>
</ol>
<p>◻</p>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="prediction-markets-and-information-cascades-2-22-2023">
<h1>Prediction Markets and Information Cascades (2/22/2023)<a class="headerlink" href="#prediction-markets-and-information-cascades-2-22-2023" title="Link to this heading">#</a></h1>
<div class="example docutils">
<p><strong>Example 46</strong> (Guessing Game). How much does an Arctic Musk Ox weigh?
At a country fair, the average of all guesses turned out to be correct.
This example motivates using “the wisdom of the crowd”. Why might asking
a crowd be good?</p>
<ol class="arabic simple">
<li><p>Different people might have different perspectives or biases that
balance out in a large crowd;</p>
<ul class="simple">
<li><p>Elections</p></li>
</ul>
</li>
<li><p>Information may be fundamentally distributed</p>
<ul class="simple">
<li><p>State of a group project</p></li>
</ul>
</li>
</ol>
</div>
<p>Even in these instances, it is important to consider incentives: people
might have an incentive to lie on polls due to social desirability, etc.</p>
<div class="example docutils">
<p><strong>Example 47</strong> (Iowa Electronic Market). Prediction market hosted by the
University of Iowa. For $1, a better can buy a bundle of a <span class="math notranslate nohighlight">\(D\)</span>-contract
and an <span class="math notranslate nohighlight">\(R\)</span>-contract where a <span class="math notranslate nohighlight">\(D\)</span>-contract pays $1 if a democrat wins and
an <span class="math notranslate nohighlight">\(R\)</span>-contract pays $1 if a republican wins (so trades are zero-sum).
Then, betters can trade via a continuous limit order book.</p>
</div>
<div class="definition docutils">
<p><strong>Definition 48</strong> (Continuous Limit Order Book). Let <span class="math notranslate nohighlight">\(Bid\)</span> denote the
highest buy order and <span class="math notranslate nohighlight">\(Ask\)</span> denote the lowest sell order. Then, buy and
sell orders arrive at any time and trade whenever a new buy order is
greater than <span class="math notranslate nohighlight">\(Ask\)</span> or if a new sell order is less than <span class="math notranslate nohighlight">\(Bid\)</span>. The house
(market) keeps any surplus from trade. Define the <span class="math notranslate nohighlight">\(Spread\)</span> at any point
in time to be <span class="math notranslate nohighlight">\(Ask-Bid\)</span>. Any order that induces a trade upon arrival is
called a Marketable order, while any order that does not induce a trade
upon arrival is called a Resting order.</p>
</div>
<p>We can interpret the price of a <span class="math notranslate nohighlight">\(D\)</span> or <span class="math notranslate nohighlight">\(R\)</span> contract as the probability
of a <span class="math notranslate nohighlight">\(D\)</span> or <span class="math notranslate nohighlight">\(R\)</span> win to aggregate the market’s beliefs. At equilibrium
prices, the number of <span class="math notranslate nohighlight">\(D\)</span> contracts is equal to the number of <span class="math notranslate nohighlight">\(R\)</span>
contracts and the total budget of predictors who think <span class="math notranslate nohighlight">\(D\)</span> is more
likely to win over <span class="math notranslate nohighlight">\(p_D\)</span> is equal to the total budget of predictors who
think <span class="math notranslate nohighlight">\(R\)</span> is more likely to win over <span class="math notranslate nohighlight">\(p_R\)</span></p>
<section id="liquidity-in-prediction-markets">
<h2>Liquidity in Prediction Markets<a class="headerlink" href="#liquidity-in-prediction-markets" title="Link to this heading">#</a></h2>
<p>One challenge in some prediction markets is large bid-ask spreads. This
leads to poor information aggregation. Why might spreads be large?</p>
<div class="definition docutils">
<p><strong>Definition 49</strong> (Liquidity Providers). People who buy low now and sell
high later without caring about the final realization. Liquidity
providers leave bid/ask resting orders on the order book that other
investors can buy/sell with at any time. When liquidity providers buy
and sell, they earn their spread.</p>
</div>
<p>In general, competition between liquidity providers drives spread down.
Providing liquidity seems like a good deal, but prices can change.</p>
<div class="theorem docutils">
<p><strong>Theorem 26</strong> (No-Trade Theorem). <em>If the market has already aggregated
all available public information, there is no point in trading.</em></p>
</div>
<p>It turns out this result still holds with private information:</p>
<div class="theorem docutils">
<p><strong>Theorem 27</strong> (No-Trade Theorem). <em>If the market has already aggregated
all available public information, there are no further trades even if
some individuals have private information.</em></p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> Suppose someone has private information that leads to them
wanting a trade. Then, no one would want to be the other person in the
trade since trades are zero-sum so if the person with private
information expects to make a profit, anyone that trades with them must
be making an expected loss. ◻</p>
</div>
</section>
<section id="information-cascades">
<h2>Information Cascades<a class="headerlink" href="#information-cascades" title="Link to this heading">#</a></h2>
<p>Information aggregation is a dynamic process. To model this:</p>
<ol class="arabic simple">
<li><p>There are <span class="math notranslate nohighlight">\(n\)</span> ordered agents <span class="math notranslate nohighlight">\(1,2,...,n\)</span>;</p></li>
<li><p>Going in sequence, agent <span class="math notranslate nohighlight">\(i\)</span>:</p>
<ol class="arabic simple">
<li><p>Observes a private signal;</p></li>
<li><p>Observes others’ actions but not others’ signals;</p></li>
<li><p>Chooses some action.</p></li>
</ol>
</li>
</ol>
<div class="example docutils">
<p><strong>Example 50</strong> (Urn Experiment). Suppose an urn has red and blue balls,
Either <span class="math notranslate nohighlight">\(2/3\)</span> balls are red and <span class="math notranslate nohighlight">\(1/3\)</span> are blue, or <span class="math notranslate nohighlight">\(2/3\)</span> are blue and
<span class="math notranslate nohighlight">\(1/3\)</span> are red. Participants draw a ball and observe its color (with
replacement to avoid probability issues), then sequentially guess if
there are more blue or red balls. If the first two players draw a blue
ball and guess that there are more blue balls, then even if someone in
the future draws a red ball, they still will guess blue. This leads to
an information cascade where players past the third ignore their
information and blindly trust players one and two.</p>
<p>Suppose in truth, there are <span class="math notranslate nohighlight">\(2/3\)</span> red balls and <span class="math notranslate nohighlight">\(1/3\)</span> blue balls. Three
cases of what happens in the first two rounds:</p>
<ol class="arabic simple">
<li><p>Correct cascade:
<span class="math notranslate nohighlight">\(\mathbb{P}\left[Red, Red\right] = \frac{2}{3} \cdot \frac{2}{3} = \frac{4}{9}\)</span>;</p></li>
<li><p>Wrong cascade:
<span class="math notranslate nohighlight">\(\mathbb{P}\left[Blue, Blue\right] = \frac{1}{3} \cdot \frac{1}{3} = \frac{1}{9}\)</span>;</p></li>
<li><p>No cascade:
<span class="math notranslate nohighlight">\(\mathbb{P}\left[Red, Blue \text{ or } Blue, Red\right] = \frac{2}{3} \cdot \frac{1}{3} +\frac{1}{3} \cdot \frac{2}{3} = \frac{4}{9}\)</span>.</p></li>
</ol>
<p>Then, the probability of a correct cascade is four times likelier than a
wrong cascade, so even with infinitely many samples there’s a <span class="math notranslate nohighlight">\(20\%\)</span>
chance of the crowd guessing completely wrong.</p>
</div>
<div class="example docutils">
<p><strong>Example 51</strong> (Stories of Information Cascades).</p>
<ol class="arabic simple">
<li><p>Two pricing algorithms for the same book led to a spiral of
misinforming one another, leading to textbooks priced at <span class="math notranslate nohighlight">\(20\)</span>
million.</p></li>
<li><p>On 5/6/2010, stock markets lost around one trillion of value but
mostly recovered in 36 minutes. Official theory: one trader
allegedly caused the crash by trading from their parents’ garage.</p></li>
</ol>
</div>
</section>
<section id="legal-issues-of-prediction-markets">
<h2>Legal Issues of Prediction Markets<a class="headerlink" href="#legal-issues-of-prediction-markets" title="Link to this heading">#</a></h2>
<p>In general, trading in prediction markets is essentially gambling which
is mostly illegal in the United States (outside of Las Vegas). The IEM
was granted a special exception by the Commodity Futures Trading
Commission subject to some constraints (limited to 1000 trades, $500
per trader). Other prediction markets have been forced to shut down.</p>
<p>However, “naked shots” can be legally bought for billions on Wall
Street.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="fixing-congestion-with-dollars-and-data-guest-lecture">
<h1>Fixing Congestion with Dollars and Data (Guest Lecture)<a class="headerlink" href="#fixing-congestion-with-dollars-and-data-guest-lecture" title="Link to this heading">#</a></h1>
<p>Networks: usually refers to computer networks (internet algorithms,
cloud computing) but there can also be social networks. Another example
of networks are travel networks (trains, roads, etc.). Incentives can be
used to influence behavior of agents acting in networks.</p>
<section id="urban-congestion">
<h2>Urban Congestion<a class="headerlink" href="#urban-congestion" title="Link to this heading">#</a></h2>
<p>Traffic not only is an annoyance for commuters, but have macro-level
costs. Time and fuel wasted by traffic was:</p>
<ol class="arabic simple">
<li><p>$115 billion in 2007;</p></li>
<li><p>$121 billion in 2011;</p></li>
<li><p>$160 billion in 2014;</p></li>
</ol>
<p>while emissions due to traffic comprised a significant portion of
overall emissions in major countries.</p>
<p>Congestion occurs when demand is greater than supply. Demand can be
reduced by changing incentives (instead of penalties), while supply can
be increased by using big data and mobile apps. On example of
incentivizing good behavior instead of penalizing bad behavior is speed
gun lotteries: if drivers were found to be <em>under</em> the speed limit, they
are entered into a lottery for some prize.</p>
<p>Transportation architecture in the 20th century was operated by agencies
(Department of Transportation, etc.) and used by commuters. However,
there was no flow of information between the users and suppliers of
transportation.</p>
<p>In the 21st century, there is more communication: commuters can use apps
to get real-time information about capacity, while suppliers have access
to large quantities of data to analyze transportation usage. Similar
changes have happened in other industries, such as retail.</p>
</section>
<section id="large-scale-nudge-engines">
<h2>Large-scale Nudge Engines<a class="headerlink" href="#large-scale-nudge-engines" title="Link to this heading">#</a></h2>
<div class="example docutils">
<p><strong>Example 52</strong> (Two Envelopes Game). You are offered two envelopes. One
has $1000 with certainty, and the other has $110,000 with 1% chance
and $0 with 99% chance. Most people would choose the first envelope.</p>
<p>Now, suppose one envelope has $1 with certainty, and the other has
$110 with 1% chance and $0 with 99% chance. In this care, most people
would choose the second envelope.</p>
</div>
<p>In games with low stakes, players tend to be more risk-seeking. As such,
lotteries or raffles should be used to pay rewards. Similarly, changing
a lottery draw into a “game” where the player draws numbers to increase
user engagement.</p>
<p>Friends also play a role in incentive programs: help with recruitment
and can influence behavior. For instance: Insinc (Incentives for
Singapore Commuters) had 3,500 participants at launch. A month later,
the Recommend-a-friend system launched and sign-ups increased right
away.</p>
<ol class="arabic simple">
<li><p>Jan: 3,500 users;</p></li>
<li><p>Feb: Recommend-a-friend launched;</p></li>
<li><p>Mar: 8,084 users,  20% were from friends;</p></li>
<li><p>Apr: 11,851 users,  30% were from friends;</p></li>
<li><p>Jun:  22,000 users,  50% were from friends;</p></li>
</ol>
<p>Friends also influence how likely an individual sticks to a program:
participants with no friends in the program stay around 50% of the time,
but participants with <span class="math notranslate nohighlight">\(9+\)</span> friends in the program stay around 90% of the
time.</p>
</section>
<section id="singapore-mrt">
<h2>Singapore MRT<a class="headerlink" href="#singapore-mrt" title="Link to this heading">#</a></h2>
<p>Goal of Insinc was to incentivize offpeak travel. In 2016, project had
400,000+ participants; program acquired by Google and ended. Similar
initiative started but under different name.</p>
<p>Commuters tap in at different MRT stations, which generates a commute
history for every participant. Points are given for any commute, with
three times the points awarded for commutes outside of peak hours.
Rewards are given based on points.</p>
<p>Data from this project corroborates with previous results: people with
friends who joined did better and people who played the reward game
instead of getting a fixed payoff were more engaged.</p>
<p>Is the program sustainable? It costs the program to provide rewards but
the program also leads to additional usage of public transport. On
average, a user takes one more weekday trip on public transport. This
makes up the cost of awarding users.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="proof-of-work-blockchains-3-1-2023">
<h1>Proof-of-Work Blockchains (3/1/2023)<a class="headerlink" href="#proof-of-work-blockchains-3-1-2023" title="Link to this heading">#</a></h1>
<div class="definition docutils">
<p><strong>Definition 53</strong> (Digital Signatures). A digital signature consists of
the following:</p>
<ol class="arabic simple">
<li><p>a public key and a secret key;</p></li>
<li><p>a signature function sign;</p></li>
<li><p>a verification function verify.</p></li>
</ol>
<p>To show agreement with statement <span class="math notranslate nohighlight">\(x\)</span>, set
<span class="math notranslate nohighlight">\(y \leftarrow sign(x,secret_key)\)</span>. Anyone with the public key can then
<span class="math notranslate nohighlight">\(verify(x,y,public_key)\)</span> to make sure the person with the secret key
agreed with <span class="math notranslate nohighlight">\(x\)</span>.</p>
</div>
<div class="definition docutils">
<p><strong>Definition 54</strong> (Cryptographic Hash Function). A hash function <span class="math notranslate nohighlight">\(H\)</span>
such that given some input <span class="math notranslate nohighlight">\(a\)</span>, it is easy to compute <span class="math notranslate nohighlight">\(H(a)\)</span> but given
some output <span class="math notranslate nohighlight">\(b\)</span>, it is difficult to compute <span class="math notranslate nohighlight">\(H^{-1}(b)\)</span>.</p>
</div>
<p>In general, the fastest way to “invert” a cryptographic hash function is
to randomly try inputs. To get <span class="math notranslate nohighlight">\(a\)</span> such that <span class="math notranslate nohighlight">\(H(a)\)</span> agrees with <span class="math notranslate nohighlight">\(b\)</span> for
the first <span class="math notranslate nohighlight">\(k\)</span> bits requires <span class="math notranslate nohighlight">\(2^k\)</span> tries.</p>
<p>Consider Alice transferring $1 to Bob. If done through a bank or other
centralized institution, the intermediary can verify that Alice does
indeed have $1 to give to Bob. However, can this transfer be done
without a bank?</p>
<p>Bob may require Alice to verify that the $1 exists and is transferred.
One way Alice may do this is to provide a history of where the $ has
been for Bob to track Alice’s history of payments and make sure Alice
has not already spent the dollar.</p>
<div class="definition docutils">
<p><strong>Definition 55</strong> (Ledger). A ledger is an ordered history of payments.
A decentralized ledger is not controlled by any one entity and can
continue to work even if a bank is hacked (Robinhood, etc.). Consensus
occurs when all entities agree that a transaction happened.</p>
</div>
<p>Ledgers are used to verify ownership of capital. In the early 1980’s,
Byzantine protocols (BFT’s) can reach consensus if a certain fraction
(around 1/2 to 2/3) of actors are honest. However, who can join?</p>
<div class="definition docutils">
<p><strong>Definition 56</strong> (Permissionless). A network is permissionless if
anyone can join or exit at any time.</p>
</div>
<p>While this is a nice property to have, verification relying on a
majority of users is useless as anyone can simply create more copies of
themselves to obtain an artificial majority. Alternatively, votes can be
tied to more concrete things:</p>
<ul class="simple">
<li><p>Proof of Work: 1 cpu equals one vote;</p></li>
<li><p>Proof of Stake: 1 coin equals one vote;</p></li>
<li><p>Proof of Space: 1 bit equals one vote.</p></li>
</ul>
<section id="simplified-bitcoin-protocol">
<h2>(Simplified) Bitcoin Protocol<a class="headerlink" href="#simplified-bitcoin-protocol" title="Link to this heading">#</a></h2>
<p>Ledger is constructed as a chain of blocks. Each block contains:</p>
<ol class="arabic simple">
<li><p>Some account of payments or transfers;</p></li>
<li><p>A cryptographic hash of the previous block;</p></li>
<li><p>A <em>nonce</em>.</p></li>
</ol>
<p>What is a nonce? A nonce for a block is valid if the hash for a new
block (which includes information about payments, hash of previous
block, and nonce) has <span class="math notranslate nohighlight">\(k\)</span> leading zeros. In general,
$<span class="math notranslate nohighlight">\(\mathbb{P}\left[\text{nonce is valid}\right] = \frac{\text{number of hashes tried}}{2^k}.\)</span><span class="math notranslate nohighlight">\(
A nonce is one way to establish Proof of Work: it proves that a lot of
hashes were tried (and some luck was involved). Miners compete to find
the first valid nonce and create (&quot;mine&quot;) new blocks. Winners are
rewarded in the form of a transaction in the new block. The \)</span>k<span class="math notranslate nohighlight">\( leading
zeros that need to match is adjusted dynamically so each block takes
around \)</span>10$ minutes to mine in expectation.</p>
<p>To verify a single payment from Alice to Bob in block <span class="math notranslate nohighlight">\(b_t\)</span>:</p>
<ol class="arabic simple">
<li><p>Verify that Alice has signed the payment using Alice’s public key;</p></li>
<li><p>Verify that Alice has received this $1 in some previous block;</p></li>
<li><p>Verify that Alice has not spent the $1 in some previous block.</p></li>
</ol>
<p>To verify an entire block:</p>
<ol class="arabic simple">
<li><p>Verify all payments individually;</p></li>
<li><p>Verify that <span class="math notranslate nohighlight">\(b_t\)</span> correctly hashes <span class="math notranslate nohighlight">\(b_{t-1}\)</span>;</p></li>
<li><p>Verify the nonce.</p></li>
</ol>
<p>For Alice to send money to Bob, a signed transaction is sent to all
miners. Then, Alice and Bob wait for the next block to be mined.</p>
<p>What happens if two miners find different nonces for a new block at the
same time? Two new blocks could be made and there is no longer
consensus. In this case, the standard protocol is to extend the longest
chain available: if block <span class="math notranslate nohighlight">\(b_t\)</span> and <span class="math notranslate nohighlight">\(\hat{b_t}\)</span> both extend <span class="math notranslate nohighlight">\(b_{t-1}\)</span>
but <span class="math notranslate nohighlight">\(b_t\)</span> has a chain to <span class="math notranslate nohighlight">\(b_{t+n}\)</span> while <span class="math notranslate nohighlight">\(\hat{b_t}\)</span> has a chain that
goes to <span class="math notranslate nohighlight">\(\hat{b_{t+m}}\)</span> for <span class="math notranslate nohighlight">\(m &lt; n\)</span>&lt; then extend <span class="math notranslate nohighlight">\(b_t\)</span> over
<span class="math notranslate nohighlight">\(\hat{b_t}\)</span>.</p>
</section>
<section id="incentive-issues-with-big-miners">
<h2>Incentive Issues with Big Miners<a class="headerlink" href="#incentive-issues-with-big-miners" title="Link to this heading">#</a></h2>
<p>Original idea (2000’s): computing power would be distributed about
equally over all people so each individual miner has a small fraction of
total power. However, emergent trends in the 2010’s disincentivized
this:</p>
<ol class="arabic simple">
<li><p>Rise of corporations taking over major computing power (the cloud);</p></li>
<li><p>Crypto-specific hardware that is much more efficient (and
expensive);</p></li>
<li><p>Cheaper energy that miners might have access to;</p></li>
<li><p>Creation of mining pools where professional miners organize to
reduce variance in gains from mining.</p></li>
</ol>
<p>Recall the longest chain rule: if one miner has access to more than half
of computing resources, they can take advantage of this to “overwrite”
blocks they don’t like by forcing a fork in the chain. For instance,
Alice can pay Bob and encode that in a block that is overwritten as a
result of a fork, causing the payment to not actually go through.</p>
<p>Even with <span class="math notranslate nohighlight">\(\alpha &lt; 1/2\)</span> of computing power, Alice can try to carry out
the same attack and rely on luck: if Alice can mine two blocks before
any other miner extends the blockchain to the block where Bob gets paid,
Alice successfully avoids needing to pay Bob. Probability this succeeds
is <span class="math notranslate nohighlight">\(\alpha^2\)</span>. As such, best practice is to wait <span class="math notranslate nohighlight">\(d &gt; 1\)</span> blocks before
accepting payment.</p>
</section>
<section id="selfish-mining">
<h2>Selfish Mining<a class="headerlink" href="#selfish-mining" title="Link to this heading">#</a></h2>
<p>Suppose there is a selfish miner who seeks to break the system.
Furthermore, suppose their connection is so fast that all longest-chain
ties are broken in their favor. What can they do? Consider the following
strategy:</p>
<ul class="simple">
<li><p>Mine blocks.</p></li>
<li><p>If block is mined, do not reveal the new block, but mine follow-ups
to that block.</p></li>
<li><p>If another miner mines the next block, reveal the block you have
already mined.</p></li>
</ul>
<p>Nothing is lost by waiting before revealing blocks: since ties are
broken in favor of the selfish miner, their block is still the block
that goes through. However, there is some benefit to them: the rest of
the network wastes time on mining a block that eventually becomes
orphaned. If the selfish miner has a fraction <span class="math notranslate nohighlight">\(\alpha\)</span> of computing
power, their <em>effective</em> relative hashrate is
<span class="math notranslate nohighlight">\(\frac{\alpha}{1-\alpha} &gt; \alpha\)</span> as for every block they mine, other
honest miners waste a block.</p>
<p>What if ties were always broken against the selfish miner? In this case,
the selfish miner risks losing their additional (hidden) progress in
case of a tie. However, what if the selfish miner can mine two blocks in
a row to ensure no ties occur? Selfish mining can be profitable in this
case if <span class="math notranslate nohighlight">\(\alpha &gt; 1/3\)</span> opposed to the previous <span class="math notranslate nohighlight">\(\alpha &gt; 1/2\)</span>.</p>
<p>This effect becomes more pronounced if the honest miners then respond to
the selfish miner’s actions: if honest miners know the selfish miner is
always going to “win”, they might leave the blockchain (to save energy
or mine other blockchains), leaving the selfish miner with an even
larger portion of hashrate.</p>
</section>
<section id="big-miners-in-practice">
<h2>Big Miners in Practice<a class="headerlink" href="#big-miners-in-practice" title="Link to this heading">#</a></h2>
<p>In 2014: <a class="reference external" href="http://GHash.io">GHash.io</a> controlled more than 51% of computing power but did
not execute attacks. Instead, they encouraged miners to leave to prevent
the value of bitcoin from dropping. For smaller coins with lower total
hash rate, the issue is larger since less computational power is needed
to achieve majority control. Furthermore, attackers may care less about
the value od smaller coins. The 51% attack happened multiple times to
“Ethereum Classic”.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="proof-of-stake-3-6-2023">
<h1>Proof of Stake (3/6/2023)<a class="headerlink" href="#proof-of-stake-3-6-2023" title="Link to this heading">#</a></h1>
<p>Continuing the analysis of big miners, proof-of-work or longest chain
protocols leads to fragile incentive structures. Luckily, the benefit is
that pools or miners with high portion of computing power want the value
of a coin to go up. However, this argument falls apart if mining
hardware can be repurposed or if the blockchain is small.</p>
<p>In proof of work (PoW), hash power is used as a proxy of how much a
miner cares about a blockchain. But why use a proxy?</p>
<p>At each iteration of a vanilla proof of stake (PoS) protocol,</p>
<ol class="arabic simple">
<li><p>A random coin is sampled;</p></li>
<li><p>owner of that coin is asked to create the next block.</p></li>
</ol>
<p>Intuitively, people with a lot of coins care about continued success of
the blockchain, while people with few coins are unlikely to be asked to
create the next block. PoS has more robust incentives and reduces
competition through computing power (which is good for the environment).</p>
<p>Mining PoS is computationally cheap, but still requires servers with a
robust connection. In practice, over half of servers are hosted by
Amazon (which means it’s not quite decentralized, but if Amazon goes
down the world is half over anyways).</p>
<section id="cryptographic-preliminaries">
<h2>Cryptographic Preliminaries<a class="headerlink" href="#cryptographic-preliminaries" title="Link to this heading">#</a></h2>
<div class="definition docutils">
<p><strong>Definition 57</strong> (Pseudo-random Function). Deterministic function that
you can share code for, but looks like a random function for
computationally bounded algorithms.</p>
</div>
<div class="remark docutils">
<p><em>Remark 16</em>. For the purposes of this class, we will treat pseudo-random
functions as “cryptographic black magic”.</p>
</div>
<div class="definition docutils">
<p><strong>Definition 58</strong> (Verifiable Delay Function). A function <span class="math notranslate nohighlight">\(f\)</span> that is
similar to a Hash function (given <span class="math notranslate nohighlight">\(a\)</span>, it is easy to verify that
<span class="math notranslate nohighlight">\(f^{-1}(a) = b\)</span>) such that parallelization does not help speed up how
long it takes to find <span class="math notranslate nohighlight">\(a\)</span>.</p>
</div>
<div class="definition docutils">
<p><strong>Definition 59</strong> (Cryptographic commitment scheme). Prevents people
from changing responses ex-post. Inputs: a secret <span class="math notranslate nohighlight">\(x\)</span> and a random
string <span class="math notranslate nohighlight">\(r\)</span>.</p>
<p>Protocol:</p>
<ol class="arabic simple">
<li><p>In this period, one agent sends <span class="math notranslate nohighlight">\(c = commit(x,r)\)</span>;</p></li>
<li><p>In the next period, they send <span class="math notranslate nohighlight">\(x,r\)</span>.</p></li>
</ol>
<p>Guarantees:</p>
<ol class="arabic simple">
<li><p>Any other agent can verify that <span class="math notranslate nohighlight">\(c = commit(x,r)\)</span>;</p></li>
<li><p>But it is computationally intractable to ind <span class="math notranslate nohighlight">\(x',r'\)</span> such that
<span class="math notranslate nohighlight">\(c = commit(x',r')\)</span>.</p></li>
</ol>
</div>
<p>How to introduce randomness in a decentralized, permissionless,
strategyproof consensus protocol? Some possible approaches are:</p>
<ol class="arabic simple">
<li><p>Ask the <span class="math notranslate nohighlight">\(t\)</span>th miner to choose the <span class="math notranslate nohighlight">\((t+1)\)</span>th miner at random;</p>
<ul class="simple">
<li><p>Not strategy proof: the <span class="math notranslate nohighlight">\(t\)</span>th miner could choose themselves.</p></li>
</ul>
</li>
<li><p>Pseudo-Random function of entire <span class="math notranslate nohighlight">\(t\)</span>th block;</p>
<ul class="simple">
<li><p>Still not strategy-proof.</p></li>
</ul>
</li>
<li><p>External event like stock prices or the weather;</p>
<ul class="simple">
<li><p>Not decentralized (have to agree on what external event) and not
strategyproof (stock prices are manipulable).</p></li>
</ul>
</li>
<li><p>Some decentralized coin-flipping protocol;</p>
<ul class="simple">
<li><p>Not permissionless.</p></li>
</ul>
</li>
</ol>
<p>Some other issues with PoS protocols:</p>
<ol class="arabic simple">
<li><p>Nothing-at-Stake: in PoW, there theoretically should only be an
incentive to extend the longest change. However, in PoS miners can
try (for free) to extend every block;</p>
<ul class="simple">
<li><p>Doesn’t work for PoW since tie-breaking is based on
computational power, not randomness.</p></li>
</ul>
</li>
<li><p>Predictability Attacks: one possible way to generate
pseudo-randomness is to use a pseudo-random function of the first
block and the current block. However, miners might be able to
predict when it’s their turn to create blocks allowing for
double-spending attacks.</p>
<ul class="simple">
<li><p>Very difficult to predict who mines the next block in PoW
protocols.</p></li>
</ul>
</li>
<li><p>Long range attack: attacker buys almost all coins at time <span class="math notranslate nohighlight">\(t\)</span> and
then sell all coins at time <span class="math notranslate nohighlight">\(t+1\)</span>. By some time <span class="math notranslate nohighlight">\(t+k\)</span>, buyers are
satisfied and pay attackers off chain so attackers are no longer
staked. Attacker can fork a chain from <span class="math notranslate nohighlight">\(b_t\)</span> in which they still own
all the coins and can mine much faster.</p>
<ul class="simple">
<li><p>Information about who gets to mine the next block is a function
of the block in PoS, but who gets to mine the next block is
independent of block in PoW. Thus, rewriting the history doesn’t
change how much computing resources you have.</p></li>
</ul>
</li>
</ol>
</section>
<section id="approaches-to-implementing-proof-of-stake">
<h2>Approaches to Implementing Proof-of-Stake<a class="headerlink" href="#approaches-to-implementing-proof-of-stake" title="Link to this heading">#</a></h2>
<ol class="arabic">
<li><p>Slashing: fining coins from miners that misbehave.</p>
<ul class="simple">
<li><p>Mitigates the noting-at-stake problem by slashing miners that
produce blocks pointing to conflicting blocks;</p></li>
<li><p>However, this needs other miners to vote on who is misbehaving;</p></li>
<li><p>Network issues might look like misbehavior (potentially is fine
since network issues also cause loss of blocks in PoW);</p></li>
<li><p>Miners need to place slashable coins in escrow so they can’t
spend it before it gets slashed (capital inefficiency).</p></li>
</ul>
</li>
<li><p>RANDAO: multi-agent randomness. Agents select a secret random bit
and send each other commitments. Then, actual bits are sent and
verified, and output is a function of all agents’ bits. Then, only
one truly random agent is sufficient for the output to be random.</p></li>
<li><p>Verifiable Delay Functions: randomness is a VDF of a random event,
like stock prices. Then, even if a miner wants to manipulate stock
prices, the VDF means that they do not know how to manipulate
prices.</p></li>
<li><p>Byzantine coin-flipping Protocols: select random coin instead of a
random attack time. Byzantine fault-tolerant (BFT) protocols can
reach consensus on random bits. Technically not permissionless, but
even more technically PoS protocols are also not permissionless
(coins are permission). These protocols may also be challenging to
scale.</p>
<ul class="simple">
<li><p>Can randomly select a committee of active Byzantine generals;
then each committee selects the next committee using a Byzantine
protocol.</p></li>
<li><p>Requires participants to be online (can slash participants that
are offline for too long).</p></li>
</ul>
</li>
<li><p>Finality/Checkpoints: in pure permissionless longest chain, agents
are never 100% sure that the chain they are currently seeing is
really the longest chain out there. For some transactions, waiting
to transact with bitcoins is prudent, but maybe not feasible for
other transactions. If 2/3 of holders agree (using BFT) on a block,
consider it final. Treat final blocks as new genesis blocks.
Mitigates long-range attacks if attackers selling their stake takes
longer than the gap between checkpoints.</p></li>
<li><p>Staking: network participants lock a stake which corresponds to how
likely they are chosen to create the next block. Receive fees for
each time they create a block.</p>
<ul class="simple">
<li><p>Aligns incentives of miners with cryptocurrency;</p></li>
<li><p>Prevents sybil attack: can’t change the amount of money clones
have;</p></li>
<li><p>Stakes can be slashed;</p></li>
<li><p>Raises money for blockchain startups.</p></li>
</ul>
<p>Why run own miner if you can lend someone your coins and have them
mine for you? Still receive rewards proportional to the number of
coins owned, convenient, and funds are still liquid. However, the
delegee might have warped incentives: if they get slashed, it’s
still your coins that are being lost.</p>
</li>
</ol>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="security-markets-3-8-2023">
<h1>Security Markets (3/8/2023)<a class="headerlink" href="#security-markets-3-8-2023" title="Link to this heading">#</a></h1>
<section id="high-frequency-trading-arms-race">
<h2>High Frequency Trading Arms Race<a class="headerlink" href="#high-frequency-trading-arms-race" title="Link to this heading">#</a></h2>
<p>In 2010, Spread Networks invested $300 million to create a new
straight-line optic fiber cable from Chicago to New York, reducing
latency from 16ms to 13ms. High frequency traders race to make trades
first, which is why they value the decrease in latency. However in 2011,
microwaves brought latency down to 10ms.</p>
<p>Is this a market failure? From Spread Network’s perspective, the cable
might have made back its investment (and then some profit), but even
then the opportunity cost of the investment might have been high as
well. Furthermore, does high frequency trading in and of itself even
benefit society?</p>
</section>
<section id="stock-markets">
<h2>Stock Markets<a class="headerlink" href="#stock-markets" title="Link to this heading">#</a></h2>
<p>We build on the definitions introduced in Section 11 (Prediction Markets
and Information Cascades).</p>
<div class="definition docutils">
<p><strong>Definition 60</strong> (Naive Investors). Individuals who want to buy/sell
stock as a means to store or liquidize assets. Naive investors do not
have a primary goal of profiting from private information.</p>
</div>
<p>With just naive investors, there can be market frictions: there may not
be stocks to buy or sell when a naive investor wants to buy or sell.
Furthermore, the no-trade theorem does not apply as these investors
derive value from the act of buying or selling itself instead of purely
caring about the monetary value of their assets.</p>
<p>As before, liquidity providers leave resting orders and buy low, sell
high. They provide an intermediary for naive investors to trade with,
but naive investors lose the spread that liquidity providers gain. As
such spread is part of naive investors’ transaction costs.</p>
<p>A stock’s “true” value represents aggregate beliefs about the stock’s
returns. In equilibrium, a stock’s true value is between the stock’s bid
and ask prices (otherwise, some agents have a profitable deviation to
buy or sell the stock). True value may vary depending on external
events. For example:</p>
<ol class="arabic simple">
<li><p>Correlated Stocks/Securities: If someone buys gold in Chicago, the
price of gold in New York increases. If there is demand for security
<span class="math notranslate nohighlight">\(X\)</span> increases and security <span class="math notranslate nohighlight">\(X\)</span> is correlated with security <span class="math notranslate nohighlight">\(Y\)</span>, then
the price of <span class="math notranslate nohighlight">\(Y\)</span> will go up.</p></li>
<li><p>Fed announcements: Fed made announcement on Sept 18, 2013. Markets
reacted faster than the speed of light.</p></li>
<li><p>Twitter: Trump tweets (about tariffs, the Fed, covfefe) changed
stock values.</p></li>
<li><p>Reddit: wallstreetbets and Gamestop stock.</p></li>
</ol>
<div class="definition docutils">
<p><strong>Definition 61</strong> (Snipers). Agents that wait for changes in stock
values and rush to trade with liquidity providers’ standing orders
before those standing orders can be canceled. As such, being faster than
competitors can be profitable.</p>
</div>
<p>In response to snipers, liquidity providers might increase spread to
decrease sniping opportunities. However, this hurts naive agents by
increasing their effective transaction costs.</p>
</section>
<section id="market-failure-fixes">
<h2>Market Failure Fixes<a class="headerlink" href="#market-failure-fixes" title="Link to this heading">#</a></h2>
<p>How can we resolve these market failures?</p>
<ol class="arabic simple">
<li><p><strong>Symmetric Speed Bumps:</strong> all orders get delayed by the same
amount.</p>
<ul class="simple">
<li><p>Doesn’t solve the speed arms race, nor does it remove sniping
risk for liquidity providers.</p></li>
</ul>
</li>
<li><p><strong>Random Speed Bumps:</strong> each order is delayed by some random amount.</p>
<ul class="simple">
<li><p>Mostly solves the speed arms race (as luck in random difference
is more important than speed differences), but makes the sniping
risk worse: if a single sniper gets lucky, then the sniping
succeeds.</p></li>
</ul>
</li>
<li><p><strong>Sniper-Only Speed Bumps:</strong> only delay snipers.</p>
<ul class="simple">
<li><p>If implemented, this would resolve the speed arms race and
sniping risk, but it is difficult to determine who is a sniper
and who is not.</p></li>
</ul>
</li>
<li><p><strong>Frequent Batch Auctions:</strong> batch orders for some short interval
and find the market-clearing price at each batch.</p>
<ul class="simple">
<li><p>Everyone now has time to react to value-changing events as
orders are prioritized by price instead of arrival (as long as
the order arrives in the same batch).</p></li>
</ul>
</li>
</ol>
</section>
<section id="blockchain-flashboys">
<h2>Blockchain Flashboys<a class="headerlink" href="#blockchain-flashboys" title="Link to this heading">#</a></h2>
<div class="definition docutils">
<p><strong>Definition 62</strong> (Smart Contract). Agreement between two agents for one
transaction (borrowing) in the current period and a second transaction
in some future period (paying back, perhaps with interest). If the
second transaction does not happen, some collateral promised by the
first agent is given to the second agent.</p>
</div>
<p>The collateral needs to be sent simultaneously with the first
transaction (otherwise one agent can abort after getting money).</p>
<div class="definition docutils">
<p><strong>Definition 63</strong> (Atomic Transaction). A transaction such that either
all steps are executed successfully or all steps are canceled.</p>
</div>
<p>One application of smart contracts is in decentralized finance (DeFi):
cryptocurrencies, stocks, and contracts are traded. Limit order books
and automatic market makers can be automated via smart contracts.</p>
<div class="definition docutils">
<p><strong>Definition 64</strong> (Arbitrage). Simultaneously buying low in one market
while selling high in another.</p>
</div>
<p>Arbitrage is especially attractive with decentralized finance:</p>
<ol class="arabic simple">
<li><p>Risk-Free Atomic Arbitrage:</p>
<ul class="simple">
<li><p>In centralized finance, the arbitrageur takes takes risk (if
they buy low first, then the high price they wanted to sell at
may drop before they get to selling).</p></li>
<li><p>However, bundling buy and sell actions into a single atomic
transaction resolves this risk.</p></li>
</ul>
</li>
<li><p>Cryptocurrencies are highly volatile, leading to more sniping
opportunities;</p></li>
<li><p>Information (code) is made public so full code and state of smart
contract automated market makers are available. As such, it is easy
to exploit bugs.</p></li>
</ol>
<div class="definition docutils">
<p><strong>Definition 65</strong> (Front-Running). Transacting right before another
agent to take advantage of the distortionary effects of the latter’s
transaction.</p>
</div>
<p>In general, this is illegal in centralized finance. In decentralized
finance however, all transactions are made publicly known before blocks
are mined. Now, suppose miners are also traders and an arbitrageur finds
an opportunity. If the arbitrageur broadcasts this transaction, then
miners can execute the same trade on their own account. Miner includes
the arbitrageur’s transaction on their block but after the miner’s own
transaction.</p>
</section>
<section id="miners-extractable-value-mev">
<h2>Miners’ Extractable Value (MEV)<a class="headerlink" href="#miners-extractable-value-mev" title="Link to this heading">#</a></h2>
<p>In DeFi, arbitrageurs compete to be at the top of the next block via
transaction fees. Then, a miner’s MEV is how much they can charge an
arbitrageur. Miners receive rewards for each block they mine and
additional transaction fees. Originally, the value for mining the block
itself is greater than the MEV, but in recent years block rewards have
went down (bitcoin rewards halve every 4ish years) while MEVs have gone
up (arbitrageurs increasing demand for transactions). When MEVs come
into play, not all blocks are created equal.</p>
<p>As such, miners can access a new type of fee-sniping attack: if block
<span class="math notranslate nohighlight">\(\hat{b}\)</span> has a larger MEV than block <span class="math notranslate nohighlight">\(b\)</span>, then miners would prefer to
mine <span class="math notranslate nohighlight">\(\hat{b}\)</span> over <span class="math notranslate nohighlight">\(b\)</span>. Then, a miner with fraction <span class="math notranslate nohighlight">\(\alpha\)</span> of
computing power profits from a fee-sniping attack if
$<span class="math notranslate nohighlight">\(\alpha^2 \cdot \text{higher MEV} &gt; \alpha \cdot \text{lower MEV} \iff \alpha &gt; \frac{\text{lower MEV}}{\text{higher MEV}}.\)</span><span class="math notranslate nohighlight">\(
Success probability is even higher if other miners also try to attack
instead of extending \)</span>b_t$.</p>
<p>With selfish tiebreaking, miners want to extend the block with higher
MEV opposed to the block that was seen first. Furthermore, a miner can
incentivize other miners to help extend their block by leaving some MEV
leftover in the next block (known as undercutting). Some possible ways
to undercut these issues:</p>
<ol class="arabic simple">
<li><p>Transaction fees distributed among miners that mine the next <span class="math notranslate nohighlight">\(k\)</span>
blocks;</p></li>
<li><p>Capped transaction fees;</p></li>
<li><p>“Burn” transaction fees instead of giving them to miners.</p></li>
</ol>
<p>However, arbitrageurs and miners can always make side payments.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="envy-and-fairness-3-13-2023">
<h1>Envy and Fairness (3/13/2023)<a class="headerlink" href="#envy-and-fairness-3-13-2023" title="Link to this heading">#</a></h1>
<p>Consider cake cutting: Alice and Bob want to split a cake, and the cake
has different toppings (strawberries, chocolate, etc.) over different
regions. One canonical mechanism is I-cut-you-choose:</p>
<ol class="arabic simple">
<li><p>One agent cuts the cake;</p></li>
<li><p>The other picks which slice they want;</p></li>
<li><p>First agent gets the remaining cake.</p></li>
</ol>
<div class="proposition docutils">
<p><strong>Proposition 66</strong>. I-cut-you-choose is not dominant-strategy incentive
compatible for the cutting agent but is for the choosing agent.</p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> The cutter’s optimal strategy depends on the chooser’s
preferences. The chooser directly chooses their outcome. ◻</p>
</div>
<p>Why, has this mechanism been used? There is some notion of fairness in
this:</p>
<div class="definition docutils">
<p><strong>Definition 67</strong> (Envy-Free). An allocation is envy-free if no agent
envies another agent’s allocation.</p>
</div>
<div class="proposition docutils">
<p><strong>Proposition 68</strong>. The I-cut-you-choose mechanism can always lead to an
envy-free allocation for both players.</p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> The cutter can always cut the cake into two pieces that are
equal in their perspective, so no matter which slice they get the
allocation is envy-free for them. Then, the choose chooses their
favorite slice, so it clearly is envy-free for them. ◻</p>
</div>
<section id="formalizing-fair-allocations">
<h2>Formalizing Fair Allocations<a class="headerlink" href="#formalizing-fair-allocations" title="Link to this heading">#</a></h2>
<p>Goal: from a set of items <span class="math notranslate nohighlight">\(A\)</span>, choose some allocation for each of <span class="math notranslate nohighlight">\(n\)</span>
agents. Each agent <span class="math notranslate nohighlight">\(i\)</span> has a valuation function
<span class="math notranslate nohighlight">\(v_i: \mathcal{P}(A) \to \mathbb{R}\)</span>. Then, there are several measures
of fairness (defined in this setting):</p>
<ul class="simple">
<li><p>Envy-Free: for all <span class="math notranslate nohighlight">\(i,j\)</span> we have <span class="math notranslate nohighlight">\(v_i(A_i) \geq v_i(A_j)\)</span>;</p></li>
<li><p>Proportional: for all <span class="math notranslate nohighlight">\(i, v_i(A_i) \geq v_i(A)/n\)</span>;</p></li>
<li><p>Equitable: for all <span class="math notranslate nohighlight">\(i,j\)</span> we have <span class="math notranslate nohighlight">\(v_i(A_i) = v_j(A_j)\)</span>;</p></li>
<li><p>Perfect: for all <span class="math notranslate nohighlight">\(i, v_i(A_i) = v_i(A)/n\)</span>.</p></li>
</ul>
<p>Another possibility: competitive equilibrium from equal incomes, which
is similar to competitive equilibrium except give everyone a “fake
dollar” to spend.</p>
<p>In cases with indivisible goods, often none of them can be satisfied. In
particular, if there is a single good (and both individuals gain
strictly positive utility from it), none of these can be satisfied. A
compromise:</p>
<div class="tcolorbox docutils">
<ol class="arabic simple">
<li><p>Each agent <span class="math notranslate nohighlight">\(i\)</span> proposes an allocation <span class="math notranslate nohighlight">\(A^1\)</span> to all agents;</p></li>
<li><p>The MMS condition is $<span class="math notranslate nohighlight">\(v_i(A_i) \geq \max_{A^i} \min_j v_i(A_j^i)\)</span>$.</p></li>
</ol>
</div>
<p>Another compromise can be to approximately satisfy these conditions: let
<span class="math notranslate nohighlight">\(\overline{a}\)</span> be the best item and <span class="math notranslate nohighlight">\(\underline{a}\)</span> be the worst item.
Then,</p>
<ol class="arabic simple">
<li><p>Envy free up to one item:
<span class="math notranslate nohighlight">\(v_i(A_i) \geq v_i(A_j \setminus \overline{a})\)</span>;</p>
<ul class="simple">
<li><p>Can always be satisfied.</p></li>
</ul>
</li>
<li><p>Envy free up to any item:
<span class="math notranslate nohighlight">\(v_i(A_i) \geq v_i(A_j \setminus \underline{a})\)</span></p>
<ul class="simple">
<li><p>Open problem for whether or not this can always be satisfied.</p></li>
</ul>
</li>
<li><p><span class="math notranslate nohighlight">\(\alpha\)</span>-Maximin Share:
<span class="math notranslate nohighlight">\(v_i(A_i) \geq \alpha \max_{A^i} \min_j v_i(A_j^i)\)</span></p>
<ul class="simple">
<li><p>Can always be satisfied for <span class="math notranslate nohighlight">\(\alpha \leq 3/4\)</span>.</p></li>
</ul>
</li>
<li><p>Approximate competitive equilibrium from equal incomes: only require
approximate equilibrium.</p>
<ul class="simple">
<li><p>Can always be satisfied but computationally difficult to compute</p></li>
</ul>
</li>
</ol>
<p>Finally, we can directly seek to maximize some “fair” measure of overall
utility. Some examples are:</p>
<ol class="arabic simple">
<li><p>Utilitarian/Social Welfare: <span class="math notranslate nohighlight">\(\max_{A_1,...,A_n} \sum_i v_i(A_i)\)</span>;</p></li>
<li><p>Nash social welfare: <span class="math notranslate nohighlight">\(\max_{A_1,...,A_n} \prod_i v_i(A_i)\)</span>;</p>
<ul class="simple">
<li><p>Middle ground between Utilitarian and Egalitarian.</p></li>
<li><p>Competitive equilibrium from equal incomes maximizes Nash social
welfare;</p></li>
</ul>
</li>
<li><p>Egalitarian/maximin: <span class="math notranslate nohighlight">\(\max_{A_1,...,A_n} \min_i v_i(A_i)\)</span>.</p></li>
</ol>
</section>
<section id="dominant-resource-fairness">
<h2>Dominant Resource Fairness<a class="headerlink" href="#dominant-resource-fairness" title="Link to this heading">#</a></h2>
<p>Suppose there are <span class="math notranslate nohighlight">\(m\)</span> resources with fixed capacities and <span class="math notranslate nohighlight">\(n\)</span> users that
want to run as many identical tasks as possible. Each task demands some
vector of resources to run. For now, suppose resources are
infinitesimally small. How can resources be allocated fairly and
efficiently without transfers?</p>
<p>For any allocation, each user has some fraction of total capacity of
each resource (given by point-wise division of the user’s usage vector
by the capacity vector). Then, a user’s dominant resource is the
resource they have the highest fraction of usage of. Dominant resource
fairness requires equal shares of dominant resources.</p>
<div class="tcolorbox docutils">
<ol class="arabic simple">
<li><p>Every agent submits their ratio of demands;</p></li>
<li><p>Algorithm computes the maximal allocation subject to DRF.</p></li>
</ol>
</div>
<div class="proposition docutils">
<p><strong>Proposition 69</strong>. Every user prefers the DRF allocation to just
getting <span class="math notranslate nohighlight">\(1/n\)</span> of every resource.</p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> As the allocation is maximal, some resource <span class="math notranslate nohighlight">\(j^*\)</span> is exhausted
so some agent <span class="math notranslate nohighlight">\(i^*\)</span> gets at least <span class="math notranslate nohighlight">\(1/n\)</span> of <span class="math notranslate nohighlight">\(j^*\)</span>. Then, each agent has
at least <span class="math notranslate nohighlight">\(1/n\)</span> of their dominant resource. ◻</p>
</div>
<div class="proposition docutils">
<p><strong>Proposition 70</strong>. The DRF mechanism is envy-free.</p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> If <span class="math notranslate nohighlight">\(i\)</span> envies <span class="math notranslate nohighlight">\(j\)</span>, then <span class="math notranslate nohighlight">\(j\)</span> must have more of every resource so
in particular, <span class="math notranslate nohighlight">\(j\)</span> must have more of <span class="math notranslate nohighlight">\(i\)</span>’s dominant resource than <span class="math notranslate nohighlight">\(i\)</span>
does, a contradiction. ◻</p>
</div>
<div class="proposition docutils">
<p><strong>Proposition 71</strong>. The DRF mechanism is Pareto-optimal and
strategyproof.</p>
</div>
<div class="proof docutils">
<p><em>Proof.</em> Pareto-Optimal: As the allocation is maximal, some resource ie
exhausted and no agent can be made happier without making some other
agent sadder.</p>
<p>Strategyproof: for any misreport, Pareto-optimality of the allocation
reached by truthful reporting means that less of the dominant resource
is received. ◻</p>
</div>
</section>
<section id="drf-in-practice">
<h2>DRF in Practice<a class="headerlink" href="#drf-in-practice" title="Link to this heading">#</a></h2>
<p>Some of the assumptions made during the setup might break:</p>
<ol class="arabic simple">
<li><p>Tasks are not identical, arrive over time, and depart;</p>
<ul class="simple">
<li><p>While resources are not exhausted, select user <span class="math notranslate nohighlight">\(i\)</span> with minimal
dominant share and add their next feasible task. Not
strategyproof (can clump tasks together) but works well in
practice.</p></li>
</ul>
</li>
<li><p>Tasks might have flexibility in resource use;</p></li>
<li><p>Tasks might have more specific criteria;</p></li>
<li><p>Tasks not infinitesimally small;</p></li>
<li><p>Users might have different priority levels;</p>
<ul class="simple">
<li><p>Weighted DRF.</p></li>
</ul>
</li>
<li><p>Some tasks have zero demand for some resources.</p>
<ul class="simple">
<li><p>Find the maximal DRF allocation and then recurse on remaining
feasible tasks.</p></li>
</ul>
</li>
</ol>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="course-selection-3-15-2023">
<h1>Course Selection (3/15/2023)<a class="headerlink" href="#course-selection-3-15-2023" title="Link to this heading">#</a></h1>
<p>Many discussion, project, or sports based classes have enrollment caps.
Some of those classes are extremely important and possibly change entire
career trajectories. Other classes (like CS classes) are essentially
uncapped. How should limited seats be allocated?</p>
<p>At Stanford, class registration is essentially (random) serial
dictatorship depending on how fast internet is for the registrant. Other
institutions have serial dictatorship based on other factors such as
seniority. Serial dictatorship is strategyproof and Pareto optimal, but
not very fair: dictators get all their favorite classes, while people
later on might get none of their favorite classes.</p>
<p>Another possibility is an auction-based mechanism: use fake money (100
points) to bid on classes in an all-pay auction. Why all-pay? Since the
money is fake, it is lost at the end of the auction anyways. However,
this makes the auction not strategyproof. Furthermore, it is difficult
to express complex preferences, such as when classes are substitutes for
one another: “either this class or that class”.</p>
<p>Finally, competitive equilibrium from equal incomes does fairly well:
smaller courses will be more expensive reflecting the size constraint,
while larger courses will be relatively cheaper. While there are some
distortionary effects of each individual’s demands, this mechanism is
strategyproof in the large: approximately strategyproof for large
markets. In a large market, each student has a small effect on prices so
prices are functionally fixed. As such, students all independently
optimize to get their best outcome. Furthermore, initial incomes are
equal so the mechanism is envy-free as well.</p>
<p>One potential problem is that a competitive equilibrium might not exist.
However, if we settle for approximate equilibrium, one will always
exist. The mechanism that implements approximate competitive equilibrium
from equal incomes is approximately strategyproof (strategyproof in the
large), approximately Pareto optimal, approximately fair (envy-free up
to one good), and always exists.</p>
<p>The final problem: it may be computationally difficult to find. In
general, it’s intractable and about as hard to compute as Nash
equilibrium (which is hard). In practice, real instances tend to be
easier, and inputs are not too large. Even then, taking a few days isn’t
too bad if it only needs to happen once ever quarter or semester.
Recently, there’s been a faster heuristic algorithm. Using this and
looking at incentives, we would need more students than atoms in the
universe to be large enough for strategyproofness in the large to hold.
It is possible to manipulate the algorithm, and using these insights the
mechanism can be re-designed to be “more strategyproof”.</p>
<hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id9" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Pareto Optimality must be defined with respect to particular
preferences. As such, it is difficult to conceptualize if an outcome
is Pareto optimal if truthful preferences are unknown.</p>
</aside>
<aside class="footnote brackets" id="id10" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p><em>This result only holds if every students’ preferences over dorms
is strict (no student can be indifferent between dorms).</em></p>
</aside>
<aside class="footnote brackets" id="id11" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>To formalize this, we can use the pigeonhole principle: take a
path of length <span class="math notranslate nohighlight">\(2n+1\)</span>; there are a total of <span class="math notranslate nohighlight">\(2n\)</span> nodes so at least
one node must have been visited twice or more.</p>
</aside>
<aside class="footnote brackets" id="id12" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">4</a><span class="fn-bracket">]</span></span>
<p>Tarjan’s algorithm runs in <span class="math notranslate nohighlight">\(O(|V| + |E|)\)</span>, but every node has
degree at most <span class="math notranslate nohighlight">\(2\)</span>, so <span class="math notranslate nohighlight">\(|E| \leq |2V|\)</span> and complexity is <span class="math notranslate nohighlight">\(O(n)\)</span>
where <span class="math notranslate nohighlight">\(n = |V|\)</span>.</p>
</aside>
<aside class="footnote brackets" id="id13" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">5</a><span class="fn-bracket">]</span></span>
<p>Strong vs Weak Stackelberg: which way we break follower
indifference against or for the leader.</p>
</aside>
<aside class="footnote brackets" id="id14" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">6</a><span class="fn-bracket">]</span></span>
<p>But this would create an externality on content creators, which is
outside the scope of this model.</p>
</aside>
<aside class="footnote brackets" id="id15" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">7</a><span class="fn-bracket">]</span></span>
<p>Formally speaking, this is the unique subgame-perfect Nash
equilibrium.</p>
</aside>
<aside class="footnote brackets" id="id16" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">8</a><span class="fn-bracket">]</span></span>
<p>In the case of <span class="math notranslate nohighlight">\(n\)</span> buyers and each drawing a value from <span class="math notranslate nohighlight">\(D\)</span>
independently, the revenue-maximizing auction is a second price
auction with reserve price <span class="math notranslate nohighlight">\(p(D)\)</span>.</p>
</aside>
</aside>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Welcome to your Jupyter Book</p>
      </div>
    </a>
    <a class="right-next"
       href="notes/day1_one_sided_markets.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">One-Sided Matching</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Mega</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#one-sided-matching">One-Sided Matching</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#properties-of-serial-dictatorship">Properties of Serial Dictatorship</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#two-sided-matching">Two-Sided Matching</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deferred-acceptance">Deferred Acceptance</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deferred-acceptance-in-practice">Deferred Acceptance in Practice</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#top-trading-cycles">Top Trading Cycles</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#top-trading-cycles-and-chains">Top Trading Cycles and Chains</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ttc-c-in-practice">TTC(C) in Practice</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#equilibria-in-games">Equilibria in Games</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#equilibrium-in-2-player-zero-sum-games">Equilibrium in 2-Player Zero-sum Games</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aside-max-min-strategies">Aside: Max-Min Strategies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nash-eq-in-non-zero-sum-games">Nash Eq in (non-zero sum) Games</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#p2p-file-sharing-dilemma">P2P File-sharing Dilemma</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#repeated-games">Repeated Games</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#repeated-games-with-discounting">Repeated Games with Discounting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bittorrent-strategies">BitTorrent Strategies</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#market-equilibrium">Market Equilibrium</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-demand-market-model">Unit-Demand Market Model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#properties-of-competitive-equilibrium">Properties of Competitive Equilibrium</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#market-failures-2-1-2023">Market Failures (2/1/2023)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#externalities-and-public-goods">Externalities and Public Goods</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#transaction-costs">Transaction Costs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#market-thickness">Market Thickness</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#timing-issues">Timing Issues</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#information-asymmetries">Information Asymmetries</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#single-unit-auctions-2-6-2023">Single-Unit Auctions (2/6/2023)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#case-of-one-buyer">Case of One Buyer</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#case-of-multiple-buyers">Case of Multiple Buyers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#revenue-maximization">Revenue Maximization</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#sponsored-search-auctions-2-8-2023">Sponsored Search Auctions (2/8/2023)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vickrey-clarke-groves-mechanism">Vickrey-Clarke-Groves Mechanism</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unnatural-equilibria">Unnatural Equilibria</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gsp-vs-vcg-in-practice">GSP vs VCG in Practice</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pacing-equilibrium-in-first-price-auction-markets-guest-lecture">Pacing Equilibrium in First-Price Auction Markets (Guest Lecture)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model">Model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#properties-of-fppe">Properties of FPPE</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#prediction-markets-and-information-cascades-2-22-2023">Prediction Markets and Information Cascades (2/22/2023)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#liquidity-in-prediction-markets">Liquidity in Prediction Markets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#information-cascades">Information Cascades</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#legal-issues-of-prediction-markets">Legal Issues of Prediction Markets</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fixing-congestion-with-dollars-and-data-guest-lecture">Fixing Congestion with Dollars and Data (Guest Lecture)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#urban-congestion">Urban Congestion</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#large-scale-nudge-engines">Large-scale Nudge Engines</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#singapore-mrt">Singapore MRT</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#proof-of-work-blockchains-3-1-2023">Proof-of-Work Blockchains (3/1/2023)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simplified-bitcoin-protocol">(Simplified) Bitcoin Protocol</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#incentive-issues-with-big-miners">Incentive Issues with Big Miners</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selfish-mining">Selfish Mining</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#big-miners-in-practice">Big Miners in Practice</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#proof-of-stake-3-6-2023">Proof of Stake (3/6/2023)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cryptographic-preliminaries">Cryptographic Preliminaries</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#approaches-to-implementing-proof-of-stake">Approaches to Implementing Proof-of-Stake</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#security-markets-3-8-2023">Security Markets (3/8/2023)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#high-frequency-trading-arms-race">High Frequency Trading Arms Race</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stock-markets">Stock Markets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#market-failure-fixes">Market Failure Fixes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#blockchain-flashboys">Blockchain Flashboys</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#miners-extractable-value-mev">Miners’ Extractable Value (MEV)</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#envy-and-fairness-3-13-2023">Envy and Fairness (3/13/2023)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#formalizing-fair-allocations">Formalizing Fair Allocations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dominant-resource-fairness">Dominant Resource Fairness</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#drf-in-practice">DRF in Practice</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#course-selection-3-15-2023">Course Selection (3/15/2023)</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Eric Gao, Logan Mondal Bhamidipaty, Aviad Rubinstein
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>